{"version":3,"sources":["webpack://@flagrow/bazaar/webpack/bootstrap","webpack://@flagrow/bazaar/./admin.js","webpack://@flagrow/bazaar/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@flagrow/bazaar/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@flagrow/bazaar/./src/admin/addBazaarPage.js","webpack://@flagrow/bazaar/./src/admin/addTasksPage.js","webpack://@flagrow/bazaar/./src/admin/components/BazaarLoader.js","webpack://@flagrow/bazaar/./src/admin/components/BazaarPage.js","webpack://@flagrow/bazaar/./src/admin/components/BazaarPageHeader.js","webpack://@flagrow/bazaar/./src/admin/components/CustomCheckbox.js","webpack://@flagrow/bazaar/./src/admin/components/ExtensionList.js","webpack://@flagrow/bazaar/./src/admin/components/ExtensionListItem.js","webpack://@flagrow/bazaar/./src/admin/components/ExtensionSearch.js","webpack://@flagrow/bazaar/./src/admin/components/TaskListItem.js","webpack://@flagrow/bazaar/./src/admin/components/TasksPage.js","webpack://@flagrow/bazaar/./src/admin/index.js","webpack://@flagrow/bazaar/./src/admin/modals/BazaarConnectModal.js","webpack://@flagrow/bazaar/./src/admin/modals/BazaarSettingsModal.js","webpack://@flagrow/bazaar/./src/admin/modals/DashboardModal.js","webpack://@flagrow/bazaar/./src/admin/modals/FilePermissionsModal.js","webpack://@flagrow/bazaar/./src/admin/modals/MemoryLimitModal.js","webpack://@flagrow/bazaar/./src/admin/models/Extension.js","webpack://@flagrow/bazaar/./src/admin/models/Task.js","webpack://@flagrow/bazaar/./src/admin/utils/ExtensionRepository.js","webpack://@flagrow/bazaar/./src/admin/utils/TaskRepository.js","webpack://@flagrow/bazaar/./src/admin/utils/debounce.js","webpack://@flagrow/bazaar/./src/admin/utils/popupPromise.js","webpack://@flagrow/bazaar/external \"flarum.core.compat['Component']\"","webpack://@flagrow/bazaar/external \"flarum.core.compat['Model']\"","webpack://@flagrow/bazaar/external \"flarum.core.compat['app']\"","webpack://@flagrow/bazaar/external \"flarum.core.compat['components/AdminLinkButton']\"","webpack://@flagrow/bazaar/external \"flarum.core.compat['components/AdminNav']\"","webpack://@flagrow/bazaar/external \"flarum.core.compat['components/Badge']\"","webpack://@flagrow/bazaar/external \"flarum.core.compat['components/Button']\"","webpack://@flagrow/bazaar/external \"flarum.core.compat['components/Dropdown']\"","webpack://@flagrow/bazaar/external \"flarum.core.compat['components/LinkButton']\"","webpack://@flagrow/bazaar/external \"flarum.core.compat['components/Modal']\"","webpack://@flagrow/bazaar/external \"flarum.core.compat['components/Placeholder']\"","webpack://@flagrow/bazaar/external \"flarum.core.compat['components/SettingsModal']\"","webpack://@flagrow/bazaar/external \"flarum.core.compat['components/Switch']\"","webpack://@flagrow/bazaar/external \"flarum.core.compat['extend']\"","webpack://@flagrow/bazaar/external \"flarum.core.compat['helpers/fullTime']\"","webpack://@flagrow/bazaar/external \"flarum.core.compat['helpers/humanTime']\"","webpack://@flagrow/bazaar/external \"flarum.core.compat['helpers/icon']\"","webpack://@flagrow/bazaar/external \"flarum.core.compat['utils/ItemList']\"","webpack://@flagrow/bazaar/external \"flarum.core.compat['utils/computed']\"","webpack://@flagrow/bazaar/external \"flarum.core.compat['utils/extract']\"","webpack://@flagrow/bazaar/external \"flarum.core.compat['utils/extractText']\"","webpack://@flagrow/bazaar/external \"flarum.core.compat['utils/mixin']\"","webpack://@flagrow/bazaar/external \"flarum.core.compat['utils/saveSettings']\""],"names":["app","routes","path","component","BazaarPage","extensionSettings","m","route","extend","AdminNav","prototype","items","add","AdminLinkButton","href","icon","children","translator","trans","description","TasksPage","BazaarLoader","view","error","props","loading","className","hidden","Button","onclick","location","reload","LinkButton","target","config","Component","init","current","authorized","data","settings","length","connected","prop","params","repository","ExtensionRepository","extensionList","ExtensionList","search","ExtensionSearch","onsubmit","updateResults","bind","update","BazaarPageHeader","render","stickyParams","sort","param","q","filter","header","buttons","concat","pagesButtons","settingsButton","requirementsButtons","connectedButtons","modal","show","BazaarSettingsModal","memory_limit_met","memory_limit","memory_requested","file_permissions","components","push","MemoryLimitModal","FilePermissionsModal","flagrowHost","DashboardModal","BazaarConnectModal","routeName","links","title","active","CustomCheckbox","attrs","Object","assign","state","type","extractText","iconName","extract","disabled","onchange","getButtonContent","moreResults","resultMeta","extensions","refresh","pages_current","total","pages_total","loadMore","text","Placeholder","map","extension","ExtensionListItem","key","package","clear","loadResults","then","results","parseResults","redraw","offset","requestParams","page","include","join","store","find","apply","payload","next","meta","lazyRedraw","out","sortMap","window","$","relevance","isInitialized","tooltip","container","controls","controlItems","toArray","badges","enabled","installed","outdated","pending","favorited","flarumCompatibilityCurrent","id","name","split","downloads","favorites","installed_version","highest_version","favoriteExtension","discuss_link","open","landing_link","ItemList","favoriteTrans","can_uninstall","uninstallExtension","can_enable","enableExtension","updateExtension","can_disable","disableExtension","can_install","installExtension","premium","canCheckout","premiumExtensionSubscribe","canSafelyUnsubscribe","premiumExtensionUnsubscribe","flarumCompatibilityNext","flarumCompatibilityLatest","subscribed","new","updateDebounce","debounce","value","oninput","withAttr","term","placeholder","isToggled","checked","toggleFilter","is","indexOf","i","splice","TaskListItem","extended","task","status","humanTime","created_at","command","fullTime","started_at","finished_at","output","TaskRepository","loadNextPage","loader","taskGroups","group","tasks","currentGroup","today","Date","setHours","forEach","taskDate","initializers","models","Extension","Task","addBazaarPage","addTasksPage","content","host","connect","popup","request","method","url","forum","attribute","response","redirect","close","Modal","form","for","Switch","setting","a","bidi","SettingsModal","syncing","updateSetting","submitButton","saveSettings","permissions","paths","required","limit","mixin","Model","license","locale","flarum_id","computed","canUnsubscribe","requestError","timeout","updateExtensionInRepository","catch","installFailure","resetNavigation","uninstallFailure","favorite","buy","popupPromise","waitForUrl","alert","toggleExtension","getExtensionIndex","findIndex","ext","pushObject","nextPageUrl","result","newTasks","createRecord","func","wait","immediate","context","args","arguments","later","callNow","clearTimeout","setTimeout","width","height","$window","deferred","interval","setInterval","closed","clearInterval","reject","document","URL","resolve","e","promise"],"mappings":";;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;AClFA;AAAA;AAAA,wC;;;;;;;;;;;;ACAA;AAAA;AAAe;AACf;AACA,mBAAmB,sBAAsB;AACzC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,C;;;;;;;;;;;;AChBA;AAAA;AAAe;AACf;AACA;AACA;AACA,C;;;;;;;;;;;;ACJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAEA,+DAAe,YAAY;AACvB;AACAA,mDAAG,CAACC,MAAJ,CAAW,gBAAX,IAA+B;AAACC,QAAI,EAAE,iBAAP;AAA0BC,aAAS,EAAEC,8DAAU,CAACD,SAAX;AAArC,GAA/B,CAFuB,CAGvB;;AACAH,mDAAG,CAACK,iBAAJ,CAAsB,gBAAtB,IAA0C;AAAA,WAAMC,CAAC,CAACC,KAAF,CAAQP,iDAAG,CAACO,KAAJ,CAAU,gBAAV,CAAR,CAAN;AAAA,GAA1C,CAJuB,CAKvB;;;AACAC,8DAAM,CAACC,iEAAQ,CAACC,SAAV,EAAqB,OAArB,EAA8B,UAAAC,KAAK,EAAI;AACzCA,SAAK,CAACC,GAAN,CAAU,gBAAV,EAA4BC,wEAAe,CAACV,SAAhB,CAA0B;AAClDW,UAAI,EAAEd,iDAAG,CAACO,KAAJ,CAAU,gBAAV,CAD4C;AAElDQ,UAAI,EAAE,qBAF4C;AAGlDC,cAAQ,EAAEhB,iDAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,gCAArB,CAHwC;AAIlDC,iBAAW,EAAEnB,iDAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,sCAArB;AAJqC,KAA1B,CAA5B;AAMH,GAPK,CAAN;AAQH,C;;;;;;;;;;;;ACpBD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEe,2EAAY;AACvBlB,mDAAG,CAACC,MAAJ,CAAW,sBAAX,IAAqC;AAACC,QAAI,EAAE,uBAAP;AAAgCC,aAAS,EAAEiB,6DAAS,CAACjB,SAAV;AAA3C,GAArC;AACH,C;;;;;;;;;;;;;;;;;;;;;;;;ACND;AACA;AACA;AACA;;IAEqBkB,Y;;;;;;;;;;;SAEjBC,I,mBAAO;AAAA;;AACH,QAAMC,KAAK,GAAG,KAAKC,KAAL,CAAWC,OAAX,OAAyB,OAAvC;AAEA,WAAOnB,CAAC,CAAC,KAAD,EAAQ;AACZoB,eAAS,EAAE,qBAAqBH,KAAK,GAAG,OAAH,GAAa,IAAvC,CADC;AAEZI,YAAM,EAAE,KAAKH,KAAL,CAAWC,OAAX,OAAyB;AAFrB,KAAR,EAGL,CACCnB,CAAC,CAAC,eAAD,EAAkB,CACfA,CAAC,CAAC,cAAD,EAAiBS,0DAAI,CAACQ,KAAK,GAAG,6BAAH,GAAmC,qBAAzC,CAArB,CADc,EAEfjB,CAAC,CAAC,KAAD,EAAQ,CACLA,CAAC,CAAC,GAAD,EAAMN,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqBK,KAAK,GAAG,mCAAH,GAAyC,wCAAnE,CAAN,CADI,EAELA,KAAK,GAAG,CACJK,+DAAM,CAACzB,SAAP,CAAiB;AACbuB,eAAS,EAAE,sBADE;AAEbX,UAAI,EAAE,aAFO;AAGbc,aAAO,EAAE;AAAA,eAAMC,QAAQ,CAACC,MAAT,EAAN;AAAA,OAHI;AAIbf,cAAQ,EAAEhB,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,qCAArB;AAJG,KAAjB,CADI,EAOJU,+DAAM,CAACzB,SAAP,CAAiB;AACbuB,eAAS,EAAE,sBADE;AAEbX,UAAI,EAAE,cAFO;AAGbc,aAAO,EAAE;AAAA,eAAM,KAAI,CAACL,KAAL,CAAWC,OAAX,CAAmB,KAAnB,CAAN;AAAA,OAHI;AAIbT,cAAQ,EAAEhB,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,mCAArB;AAJG,KAAjB,CAPI,EAaJc,mEAAU,CAAC7B,SAAX,CAAqB;AACjBuB,eAAS,EAAE,sBADM;AAEjBX,UAAI,EAAE,YAFW;AAGjBD,UAAI,EAAE,0CAHW;AAIjBmB,YAAM,EAAE,QAJS;AAKjBC,YAAM,EAAE,EALS;AAKL;AACZlB,cAAQ,EAAEhB,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,0CAArB;AANO,KAArB,CAbI,CAAH,GAqBD,IAvBC,CAAR,CAFc,CAAlB,CADF,CAHK,CAAR;AAiCH,G;;;EAtCqCiB,uD;;;;;;;;;;;;;;;;;;;;;;;;ACL1C;AACA;AACA;AACA;AACA;;IAEqB/B,U;;;;;;;;;;;SACjBgC,I,mBAAO;AACHpC,OAAG,CAACqC,OAAJ,GAAc,IAAd;AAEA,SAAKC,UAAL,GAAkB,CAACtC,GAAG,CAACuC,IAAJ,CAASC,QAAT,CAAkB,0BAAlB,KAAiD,EAAlD,EAAsDC,MAAtD,GAA+D,CAAjF;AACA,SAAKC,SAAL,GAAiB1C,GAAG,CAACuC,IAAJ,CAASC,QAAT,CAAkB,0BAAlB,KAAiDxC,GAAG,CAACuC,IAAJ,CAASC,QAAT,CAAkB,0BAAlB,MAAkD,GAApH;AACA,SAAKf,OAAL,GAAenB,CAAC,CAACqC,IAAF,CAAO,IAAP,CAAf;AAEA,SAAKC,MAAL,GAAc,KAAKA,MAAL,EAAd;AAEA,SAAKC,UAAL,GAAkB,IAAIC,kEAAJ,CAAwB,KAAKrB,OAA7B,CAAlB;AAEA,SAAKsB,aAAL,GAAqB,IAAIC,sDAAJ,CAAkB;AACnCJ,YAAM,EAAE,KAAKA,MADsB;AAEnCnB,aAAO,EAAE,KAAKA,OAFqB;AAGnCoB,gBAAU,EAAE,KAAKA,UAHkB;AAInCH,eAAS,EAAE,KAAKA,SAJmB;AAKnCJ,gBAAU,EAAE,KAAKA;AALkB,KAAlB,CAArB;AAQA,SAAKW,MAAL,GAAcC,wDAAe,CAAC/C,SAAhB,CAA0B;AAACyC,YAAM,EAAE,KAAKA,MAAd;AAAsBO,cAAQ,EAAE,KAAKC,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB;AAAhC,KAA1B,CAAd;AACH,G;;SAEDD,a,0BAAcR,M,EAAQ;AAClB,SAAKA,MAAL,GAAcA,MAAd;AAEA,SAAKG,aAAL,CAAmBO,MAAnB,CAA0BV,MAA1B;AACH,G;;SAEDtB,I,mBAAO;AACH,WAAOhB,CAAC,CAAC,KAAD,EAAQ;AAACoB,eAAS,EAAE;AAAZ,KAAR,EAA0C,CAC9C6B,yDAAgB,CAACpD,SAAjB,CAA2B;AACvBuC,eAAS,EAAE,KAAKA;AADO,KAA3B,CAD8C,EAI9CpC,CAAC,CAAC,KAAD,EAAQ;AAACoB,eAAS,EAAE;AAAZ,KAAR,EAA4C,CACzCpB,CAAC,CAAC,KAAD,EAAQ;AAACoB,eAAS,EAAE;AAAZ,KAAR,EAAkC,CAC/B,KAAKuB,MAD0B,EAE/B,KAAKF,aAAL,CAAmBS,MAAnB,EAF+B,CAAlC,CADwC,CAA5C,CAJ6C,CAA1C,CAAR;AAWH,G;AAED;;;;;;;SAKAC,Y,2BAAe;AACX,WAAO;AACHC,UAAI,EAAEpD,CAAC,CAACC,KAAF,CAAQoD,KAAR,CAAc,MAAd,CADH;AAEHC,OAAC,EAAEtD,CAAC,CAACC,KAAF,CAAQoD,KAAR,CAAc,GAAd;AAFA,KAAP;AAIH,G;AAGD;;;;;;;SAKAf,M,qBAAS;AACL,QAAMA,MAAM,GAAG,KAAKa,YAAL,EAAf;AAEAb,UAAM,CAACiB,MAAP,GAAgBvD,CAAC,CAACC,KAAF,CAAQoD,KAAR,CAAc,QAAd,CAAhB;AAEA,WAAOf,MAAP;AACH,G;;;EAnEmCT,uD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACNxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAEqBoB,gB;;;;;;;;;;;SACjBjC,I,mBAAO;AACH,WACI;AAAK,eAAS,EAAC;AAAf,OACI;AAAK,eAAS,EAAC;AAAf,OACK,KAAKwC,MAAL,EADL,CADJ,CADJ;AAOH,G;;SAEDA,M,qBAAS;AACL,QAAIC,OAAO,GAAG,GAAGC,MAAH,CACZ,KAAKC,YAAL,EADY,EAEZ,KAAKC,cAAL,EAFY,EAGZ,KAAKC,mBAAL,EAHY,EAIZ,KAAKC,gBAAL,EAJY,CAAd;AAOA,WAAO9D,CAAC,CAAC,KAAD,EAAQ;AAACoB,eAAS,EAAE;AAAZ,KAAR,EAAoCqC,OAApC,CAAR;AACH,G;;SAEDG,c,6BAAiB;AACf,WAAO,CACLtC,+DAAM,CAACzB,SAAP,CAAiB;AACfuB,eAAS,EAAE,qBADI;AAEfX,UAAI,EAAE,YAFS;AAGfc,aAAO,EAAE;AAAA,eAAM7B,iDAAG,CAACqE,KAAJ,CAAUC,IAAV,CAAe,IAAIC,mEAAJ,EAAf,CAAN;AAAA;AAHM,KAAjB,CADK,CAAP;AAOD,G;AACD;;;;;;SAIAJ,mB,kCAAsB;AAClB,QAAIK,gBAAgB,GAAGxE,iDAAG,CAACuC,IAAJ,CAASC,QAAT,CAAkB,qCAAlB,KAA4D,KAAnF;AACA,QAAIiC,YAAY,GAAGzE,iDAAG,CAACuC,IAAJ,CAASC,QAAT,CAAkB,iCAAlB,CAAnB;AACA,QAAIkC,gBAAgB,GAAG1E,iDAAG,CAACuC,IAAJ,CAASC,QAAT,CAAkB,qCAAlB,CAAvB;AACA,QAAImC,gBAAgB,GAAG3E,iDAAG,CAACuC,IAAJ,CAASC,QAAT,CAAkB,iCAAlB,KAAwD,EAA/E;AAEA,QAAIoC,UAAU,GAAG,EAAjB;;AAEA,QAAI,CAACJ,gBAAL,EAAuB;AACnBI,gBAAU,CAACC,IAAX,CACIjD,+DAAM,CAACzB,SAAP,CAAiB;AACbuB,iBAAS,EAAE,6CADE;AAEbX,YAAI,EAAE,eAFO;AAGbc,eAAO,EAAE;AAAA,iBAAM7B,iDAAG,CAACqE,KAAJ,CAAUC,IAAV,CAAe,IAAIQ,gEAAJ,CAAqB;AAACJ,4BAAgB,EAAhBA,gBAAD;AAAmBD,wBAAY,EAAZA;AAAnB,WAArB,CAAf,CAAN;AAAA;AAHI,OAAjB,CADJ;AAOH;;AAED,QAAIE,gBAAgB,CAAClC,MAAjB,GAA0B,CAA9B,EAAiC;AAC7BmC,gBAAU,CAACC,IAAX,CAAgBjD,+DAAM,CAACzB,SAAP,CAAiB;AAC7BuB,iBAAS,EAAE,iDADkB;AAE7BX,YAAI,EAAE,YAFuB;AAG7Bc,eAAO,EAAE;AAAA,iBAAM7B,iDAAG,CAACqE,KAAJ,CAAUC,IAAV,CAAe,IAAIS,oEAAJ,CAAyB;AAACJ,4BAAgB,EAAhBA;AAAD,WAAzB,CAAf,CAAN;AAAA;AAHoB,OAAjB,CAAhB;AAKH;;AAED,WAAOC,UAAP;AACH,G;;SAEDR,gB,+BAAmB;AACf,QAAI1B,SAAS,GAAG,KAAKlB,KAAL,CAAWkB,SAA3B;AACA,QAAIsC,WAAW,GAAGhF,iDAAG,CAACuC,IAAJ,CAASC,QAAT,CAAkB,6BAAlB,KAAoD,oBAAtE;;AAEA,QAAIE,SAAJ,EAAe;AACX,aAAO,CACHd,+DAAM,CAACzB,SAAP,CAAiB;AACbuB,iBAAS,EAAE,+BADE;AAEbX,YAAI,EAAE,aAFO;AAGbc,eAAO,EAAE;AAAA,iBAAM7B,iDAAG,CAACqE,KAAJ,CAAUC,IAAV,CAAe,IAAIW,8DAAJ,CAAmB;AAC7CD,uBAAW,EAAXA;AAD6C,WAAnB,CAAf,CAAN;AAAA;AAHI,OAAjB,CADG,CAAP;AASH;;AAED,WAAO,CACHpD,+DAAM,CAACzB,SAAP,CAAiB;AACbuB,eAAS,EAAE,6BADE;AAEbX,UAAI,EAAE,aAFO;AAGbc,aAAO,EAAE;AAAA,eAAM7B,iDAAG,CAACqE,KAAJ,CAAUC,IAAV,CAAe,IAAIY,kEAAJ,CAAuB;AAACF,qBAAW,EAAXA;AAAD,SAAvB,CAAf,CAAN;AAAA;AAHI,KAAjB,CADG,CAAP;AAOH,G;;SAEDf,Y,2BAAe;AACX;AACA,QAAI,OAAOjE,iDAAG,CAACqC,OAAX,KAAuB,WAA3B,EAAwC;AACpC,aAAO,IAAP;AACH;;AAED,QAAM8C,SAAS,GAAGnF,iDAAG,CAACqC,OAAJ,CAAYb,KAAZ,CAAkB2D,SAApC;AACA,QAAIC,KAAK,GAAG,EAAZ;AAEAA,SAAK,CAACP,IAAN,CAAW7C,mEAAU,CAAC7B,SAAX,CAAqB;AAC5BuB,eAAS,EAAE,qBADiB;AAE5BX,UAAI,EAAE,qBAFsB;AAG5BD,UAAI,EAAEd,iDAAG,CAACO,KAAJ,CAAU,gBAAV,CAHsB;AAI5B8E,WAAK,EAAErF,iDAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,wCAArB,CAJqB;AAK5BoE,YAAM,EAAEH,SAAS,KAAK;AALM,KAArB,CAAX;AAQAC,SAAK,CAACP,IAAN,CAAW7C,mEAAU,CAAC7B,SAAX,CAAqB;AAC5BuB,eAAS,EAAE,qBADiB;AAE5BX,UAAI,EAAE,gBAFsB;AAG5BD,UAAI,EAAEd,iDAAG,CAACO,KAAJ,CAAU,sBAAV,CAHsB;AAI5B8E,WAAK,EAAErF,iDAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,mCAArB,CAJqB;AAK5BoE,YAAM,EAAEH,SAAS,KAAK;AALM,KAArB,CAAX;AAQA,WAAOC,KAAP;AACH,G;;;EAnHyCjD,uD;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACV9C;AACA;AACA;AACA;;IAEqBoD,c;;;;;;;;;;;SACjBjE,I,mBAAO;AACH,QAAMkE,KAAK,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB,KAAKlE,KAAvB,CAAd;AAEA,WAAOgE,KAAK,CAACG,KAAb;AACA,WAAOH,KAAK,CAACxE,QAAb;AAEAwE,SAAK,CAAC9D,SAAN,GAAkB8D,KAAK,CAAC9D,SAAN,IAAmB,EAArC;AACA8D,SAAK,CAACI,IAAN,GAAaJ,KAAK,CAACI,IAAN,IAAc,QAA3B;AAEA,QAAI,KAAKpE,KAAL,CAAWmE,KAAf,EAAsBH,KAAK,CAAC9D,SAAN,IAAmB,SAAnB,CATnB,CAWH;;AACA,QAAI,CAAC8D,KAAK,CAACH,KAAP,IAAgB,KAAK7D,KAAL,CAAWR,QAA/B,EAAyC;AACrCwE,WAAK,CAACH,KAAN,GAAcQ,+DAAW,CAAC,KAAKrE,KAAL,CAAWR,QAAZ,CAAzB;AACH;;AAED,QAAM8E,QAAQ,GAAGC,2DAAO,CAACP,KAAD,EAAQ,MAAR,CAAxB;AACA,QAAIM,QAAJ,EAAcN,KAAK,CAAC9D,SAAN,IAAmB,UAAnB;AAEd,QAAMD,OAAO,GAAGsE,2DAAO,CAACP,KAAD,EAAQ,SAAR,CAAvB;;AACA,QAAIA,KAAK,CAACQ,QAAN,IAAkBvE,OAAtB,EAA+B;AAC3B+D,WAAK,CAAC9D,SAAN,IAAmB,eAAeD,OAAO,GAAG,UAAH,GAAgB,EAAtC,CAAnB;AACA,aAAO+D,KAAK,CAAC3D,OAAb;AACH;;AAED,WACI,mGAAY2D,KAAZ;AACI,aAAO,EAAE,KAAKS,QAAL,CAAc5C,IAAd,CAAmB,IAAnB;AADb,QAGK,KAAK6C,gBAAL,EAHL,CADJ;AAOH,G;AAED;;;;;;;;SAMAD,Q,uBAAW;AACP,QAAI,KAAKzE,KAAL,CAAWyE,QAAf,EAAyB,KAAKzE,KAAL,CAAWyE,QAAX,CAAoB,CAAE,KAAKzE,KAAL,CAAWmE,KAAjC,EAAwC,IAAxC;AAC5B,G;;;EA3CuC/D,+D;;;;;;;;;;;;;;;;;;;;;;;;;;ACL5C;AACA;AACA;AACA;AACA;;IAEqBoB,a;;;;;;;;;;;SACjBZ,I,mBAAO;AACH;;;;;AAKA,SAAKX,OAAL,GAAe,KAAKD,KAAL,CAAWC,OAA1B;AAEA;;;;;;AAKA,SAAK0E,WAAL,GAAmB,KAAnB;AACA,SAAKC,UAAL,GAAkB,EAAlB,CAdG,CAgBH;;AAEA;;;;;;AAKA,SAAKC,UAAL,GAAkB,EAAlB;AAEA,SAAKC,OAAL;AACH,G;;SAIDhF,I,mBAAO;AAAA;;AACH,QAAIG,OAAJ;;AAEA,QAAI,KAAKA,OAAL,EAAJ,EAAoB;AAChBA,aAAO,GAAGJ,qDAAY,CAAClB,SAAb,CAAuB;AAACsB,eAAO,EAAE,KAAKA;AAAf,OAAvB,CAAV;AACH,KAFD,MAEO,IAAI,KAAK0E,WAAT,EAAsB;AACzB1E,aAAO,GAAG,CACNG,+DAAM,CAACzB,SAAP,CAAiB;AACba,gBAAQ,EAAEhB,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,uCAArB,EAA8D;AAACmB,iBAAO,EAAE,KAAK+D,UAAL,CAAgBG,aAAhB,GAAgC,CAA1C;AAA6CC,eAAK,EAAE,KAAKJ,UAAL,CAAgBK;AAApE,SAA9D,CADG;AAEb/E,iBAAS,EAAE,wBAFE;AAGbG,eAAO,EAAE,KAAK6E,QAAL,CAAcrD,IAAd,CAAmB,IAAnB;AAHI,OAAjB,CADM,CAAV;AAOH;;AAED,QAAI,KAAKgD,UAAL,CAAgB5D,MAAhB,KAA2B,CAA3B,IAAgC,CAAC,KAAKhB,OAA1C,EAAmD;AAC/C,UAAIkF,IAAI,GAAG3G,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,sDAArB,CAAX;;AAEA,UAAI,CAAE,KAAKM,KAAL,CAAWc,UAAjB,EAA6B;AACzBqE,YAAI,GAAG3G,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,gDAArB,CAAP;AACH;;AAED,aACI;AAAK,iBAAS,EAAC;AAAf,SACK0F,oEAAW,CAACzG,SAAZ,CAAsB;AAACwG,YAAI,EAAJA;AAAD,OAAtB,CADL,CADJ;AAKH;;AAED,WACI;AAAK,eAAS,EAAC;AAAf,OACI;AAAK,eAAS,EAAC;AAAf,OACK,KAAKN,UAAL,CAAgBQ,GAAhB,CAAoB,UAAAC,SAAS,EAAI;AAC9B,aAAOC,0DAAiB,CAAC5G,SAAlB,CAA4B;AAC3B2G,iBAAS,EAAEA,SADgB;AAE3BjE,kBAAU,EAAE,KAAI,CAACrB,KAAL,CAAWqB,UAFI;AAG3BH,iBAAS,EAAE,KAAI,CAAClB,KAAL,CAAWkB,SAHK;AAI3BsE,WAAG,EAAEF,SAAS,CAACG,OAAV;AAJsB,OAA5B,CAAP;AAMH,KAPA,CADL,CADJ,EAWI;AAAK,eAAS,EAAC;AAAf,OACKxF,OADL,CAXJ,CADJ;AAiBH,G;;SAED6B,M,mBAAOV,M,EAAQ;AACX,SAAKpB,KAAL,CAAWoB,MAAX,GAAoBA,MAApB;AAEA,SAAK0D,OAAL;AACH,G;AAED;;;;;;;SAKAA,O,oBAAQY,K,EAAc;AAAA;;AAAA,QAAdA,KAAc;AAAdA,WAAc,GAAN,IAAM;AAAA;;AAClB,QAAIA,KAAJ,EAAW;AACP,WAAKzF,OAAL,CAAa,IAAb;AACA,WAAK4E,UAAL,GAAkB,EAAlB;AACH;;AAED,WAAO,KAAKc,WAAL,GAAmBC,IAAnB,CACH,UAAAC,OAAO,EAAI;AACP,YAAI,CAAChB,UAAL,GAAkB,EAAlB;;AACA,YAAI,CAACiB,YAAL,CAAkBD,OAAlB;AACH,KAJE,EAKH,YAAM;AACF,YAAI,CAAC5F,OAAL,CAAa,KAAb;;AACAnB,OAAC,CAACiH,MAAF;AACH,KARE,CAAP;AAUH,G;AAED;;;;;;;;SAMAJ,W,wBAAYK,M,EAAQ;AAChB,QAAM5E,MAAM,GAAG,KAAK6E,aAAL,EAAf;AACA7E,UAAM,CAAC8E,IAAP,GAAc;AAACF,YAAM,EAANA;AAAD,KAAd;AACA5E,UAAM,CAAC+E,OAAP,GAAiB/E,MAAM,CAAC+E,OAAP,CAAeC,IAAf,CAAoB,GAApB,CAAjB;AAEA,WAAO5H,GAAG,CAAC6H,KAAJ,CAAUC,IAAV,CAAe,mBAAf,EAAoClF,MAApC,CAAP;AACH,G;AAED;;;;;;;;SAMA0E,Y,yBAAaD,O,EAAS;AAClB,OAAGxC,IAAH,CAAQkD,KAAR,CAAc,KAAK1B,UAAnB,EAA+BgB,OAA/B;AAEA,SAAK5F,OAAL,CAAa,KAAb;AACA,SAAK0E,WAAL,GAAmB,CAAC,CAACkB,OAAO,CAACW,OAAR,CAAgB5C,KAAhB,CAAsB6C,IAA3C;AACA,SAAK7B,UAAL,GAAkBiB,OAAO,CAACW,OAAR,CAAgBE,IAAhB,IAAwB,EAA1C;AAEA5H,KAAC,CAAC6H,UAAF;AAEA,WAAOd,OAAP;AACH,G;AAED;;;;;;;SAKAX,Q,uBAAW;AACP,SAAKjF,OAAL,CAAa,IAAb;AAEA,SAAK0F,WAAL,CAAiB,KAAKd,UAAL,CAAgB5D,MAAjC,EACK2E,IADL,CACU,KAAKE,YAAL,CAAkBjE,IAAlB,CAAuB,IAAvB,CADV;AAEH,G;AAED;;;;;;;;;SAOAoE,a,4BAAgB;AACZ,QAAM7E,MAAM,GAAG,KAAKpB,KAAL,CAAWoB,MAA1B;AACA,QAAMwF,GAAG,GAAG;AAACT,aAAO,EAAE,EAAV;AAAc9D,YAAM,EAAE;AAAtB,KAAZ;AAEAuE,OAAG,CAAC1E,IAAJ,GAAW,KAAK2E,OAAL,GAAezF,MAAM,CAACc,IAAtB,CAAX;;AAEA,QAAId,MAAM,CAACgB,CAAX,EAAc;AACVwE,SAAG,CAACvE,MAAJ,CAAWD,CAAX,GAAehB,MAAM,CAACgB,CAAtB;AACH;;AAED,QAAIhB,MAAM,CAACiB,MAAX,EAAmB;AACfuE,SAAG,CAACvE,MAAJ,GAAayE,MAAM,CAACC,CAAP,CAAS5E,KAAT,CAAef,MAAM,CAACiB,MAAtB,CAAb;AACH;;AAED,WAAOuE,GAAP;AACH,G;AAED;;;;;;;;SAMAC,O,sBAAU;AACN,QAAMxB,GAAG,GAAG,EAAZ;;AAEA,QAAI,KAAKrF,KAAL,CAAWoB,MAAX,CAAkBgB,CAAtB,EAAyB;AACrBiD,SAAG,CAAC2B,SAAJ,GAAgB,EAAhB;AACH;;AAED,WAAO3B,GAAP;AACH,G;;;EA9LsC1E,uD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACN3C;AACA;AACA;AACA;AACA;AACA;;IAEqB4E,iB;;;;;;;;;;;SACjB7E,M,mBAAOuG,a,EAAe;AAClB,QAAIA,aAAJ,EAAmB,OADD,CAGlB;;AACA,QAAI,KAAKjH,KAAL,CAAWsF,SAAX,CAAqB3F,WAArB,EAAJ,EAAwC,KAAKoH,CAAL,CAAO,gBAAP,EAAyBG,OAAzB,CAAiC;AAACC,eAAS,EAAE;AAAZ,KAAjC;AAC3C,G;;SAEDrH,I,mBAAO;AACH,QAAMwF,SAAS,GAAG,KAAKtF,KAAL,CAAWsF,SAA7B;AACA,QAAMpE,SAAS,GAAG,KAAKlB,KAAL,CAAWkB,SAAX,IAAwB,KAA1C;AACA,QAAMkG,QAAQ,GAAG,KAAKC,YAAL,CAAkB/B,SAAlB,EAA6BpE,SAA7B,EAAwCoG,OAAxC,EAAjB;AACA,QAAMC,MAAM,GAAG,KAAKA,MAAL,CAAYjC,SAAZ,EAAuBgC,OAAvB,EAAf;AACA,QAAMjG,UAAU,GAAG,KAAKrB,KAAL,CAAWqB,UAA9B;AAEA,WAAO;AAAK,eAAS,EACjB,gBACCiE,SAAS,CAACkC,OAAV,KAAsB,UAAtB,GAAmC,WADpC,KAEClC,SAAS,CAACmC,SAAV,KAAwB,YAAxB,GAAuC,cAFxC,KAGCnC,SAAS,CAACoC,QAAV,KAAuB,WAAvB,GAAqC,EAHtC,KAICpC,SAAS,CAACqC,OAAV,KAAsB,UAAtB,GAAmC,EAJpC,KAKCP,QAAQ,CAACnG,MAAT,GAAkB,CAAlB,GAAsB,aAAtB,GAAsC,EALvC,KAMCqE,SAAS,CAACsC,SAAV,KAAwB,WAAxB,GAAsC,EANvC,KAOCtC,SAAS,CAACuC,0BAAV,KAAyC,aAAzC,GAAyD,cAP1D,CADG;AASL,SAAG,EAAEvC,SAAS,CAACwC,EAAV,EATA;AASgB,iBAASxC,SAAS,CAACwC,EAAV;AATzB,OAUH;AAAM,eAAS,EAAC,gBAAhB;AAAiC,WAAK,EAAExC,SAAS,CAAC/F,IAAV,MAAoB,EAA5D;AAAgE,WAAK,EAAE+F,SAAS,CAAC3F,WAAV;AAAvE,OACG2F,SAAS,CAAC/F,IAAV,KAAmBA,0DAAI,CAAC,YAAY+F,SAAS,CAAC/F,IAAV,GAAiBwI,IAA9B,CAAvB,GAA6D,EADhE,CAVG,EAaH;AAAK,eAAS,EAAC;AAAf,OACI;AAAI,eAAS,EAAC;AAAd,OACKR,MADL,CADJ,EAII;AAAO,eAAS,EAAC;AAAjB,OACKjC,SAAS,CAACzB,KAAV,MAAqByB,SAAS,CAACG,OAAV,EAD1B,CAJJ,EAQI;AAAK,eAAS,EAAC;AAAf,OACKH,SAAS,CAAC3F,WAAV,EADL,CARJ,EAYI;AAAK,eAAS,EAAC;AAAf,OACI;AAAK,eAAS,EAAC;AAAf,OAAuB;AAAG,eAAS,EAAC;AAAb,MAAvB,OAAwDnB,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,4CAArB,CAAxD,CADJ,EAEI;AAAK,eAAS,EAAC;AAAf,OAAwB4F,SAAS,CAACG,OAAV,GAAoBuC,KAApB,CAA0B,GAA1B,EAA+B,CAA/B,CAAxB,CAFJ,CAZJ,EAgBI;AAAK,eAAS,EAAC;AAAf,OACI;AAAK,eAAS,EAAC;AAAf,OAAuB;AAAG,WAAK,EAAC;AAAT,MAAvB,OAAwDxJ,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,+CAArB,CAAxD,CADJ,EAEI;AAAK,eAAS,EAAC;AAAf,OAAwB4F,SAAS,CAAC2C,SAAV,EAAxB,CAFJ,CAhBJ,EAoBI;AAAK,eAAS,EAAC;AAAf,OACI;AAAK,eAAS,EAAC;AAAf,OAAuB;AAAG,eAAS,EAAC;AAAb,MAAvB,OAAyDzJ,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,+CAArB,CAAzD,CADJ,EAEI;AAAK,eAAS,EAAC;AAAf,OAAwB4F,SAAS,CAAC4C,SAAV,EAAxB,CAFJ,CApBJ,EAwBK5C,SAAS,CAAC6C,iBAAV,KACG;AAAK,eAAS,EAAC;AAAf,OACI;AAAK,eAAS,EAAC;AAAf,OAAwB3J,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,uDAArB,CAAxB,CADJ,EAEI;AAAK,eAAS,EAAC;AAAf,OAAwB4F,SAAS,CAAC6C,iBAAV,EAAxB,CAFJ,CADH,GAKG,EA7BR,EA8BI;AAAK,eAAS,EAAC;AAAf,OACI;AAAK,eAAS,EAAC;AAAf,OAAwB3J,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,qDAArB,CAAxB,CADJ,EAEI;AAAK,eAAS,EAAC;AAAf,OAAwB4F,SAAS,CAAC8C,eAAV,EAAxB,CAFJ,CA9BJ,EAkCI;AAAK,eAAS,EAAC;AAAf,OACKlH,SAAS,GACN,EAAC,+DAAD;AACI,eAAS,EAAC,2CADd;AAEI,UAAI,EAAE,CAACoE,SAAS,CAACsC,SAAV,KAAwB,KAAxB,GAAgC,KAAjC,IAA0C,WAFpD;AAGI,aAAO,EAAE;AAAA,eAAMvG,UAAU,CAACgH,iBAAX,CAA6B/C,SAA7B,CAAN;AAAA;AAHb,MADM,GAMN,EAPR,EAQKA,SAAS,CAACgD,YAAV,KACG,EAAC,+DAAD;AACI,eAAS,EAAC,kCADd;AAEI,UAAI,EAAC,iBAFT;AAGI,aAAO,EAAE;AAAA,eAAMxB,MAAM,CAACyB,IAAP,CAAYjD,SAAS,CAACgD,YAAV,EAAZ,CAAN;AAAA;AAHb,MADH,GAMG,EAdR,EAeKhD,SAAS,CAACkD,YAAV,KACG,EAAC,+DAAD;AACI,eAAS,EAAC,kCADd;AAEI,UAAI,EAAC,mBAFT;AAGI,aAAO,EAAE;AAAA,eAAM1B,MAAM,CAACyB,IAAP,CAAYjD,SAAS,CAACkD,YAAV,EAAZ,CAAN;AAAA;AAHb,MADH,GAMG,EArBR,EAsBKpB,QAAQ,CAACnG,MAAT,GAAkB,CAAlB,GACG,EAAC,iEAAD;AACI,qBAAe,EAAC,kCADpB;AAEI,mBAAa,EAAC,sBAFlB;AAGI,UAAI,EAAC;AAHT,OAIKmG,QAJL,CADH,GAOG,EA7BR,CAlCJ,CAbG,CAAP;AAgFH,G;;SAEDC,Y,yBAAa/B,S,EAAWpE,S,EAAW;AAAA;;AAC/B,QAAM/B,KAAK,GAAG,IAAIsJ,4DAAJ,EAAd;AACA,QAAMpH,UAAU,GAAG,KAAKrB,KAAL,CAAWqB,UAA9B;AAEA,QAAMqH,aAAa,GAAGpD,SAAS,CAACsC,SAAV,KAAwB,yDAAxB,GAAoF,kDAA1G;;AAEA,QAAI1G,SAAJ,EAAe;AACX/B,WAAK,CAACC,GAAN,CAAU,UAAV,EAAsBgB,+DAAM,CAACzB,SAAP,CAAiB;AACnCY,YAAI,EAAE,cAD6B;AAEnCC,gBAAQ,EAAEhB,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqBgJ,aAArB,CAFyB;AAGnCrI,eAAO,EAAE,mBAAM;AACXgB,oBAAU,CAACgH,iBAAX,CAA6B/C,SAA7B;AACH;AALkC,OAAjB,CAAtB;AAOH;;AAED,QAAI,CAAEA,SAAS,CAACqC,OAAV,EAAN,EAA2B;AACvB,UAAIrC,SAAS,CAACkC,OAAV,MAAuBhJ,GAAG,CAACK,iBAAJ,CAAsBkJ,IAAtB,CAA3B,EAAwD;AACpD5I,aAAK,CAACC,GAAN,CAAU,UAAV,EAAsBgB,+DAAM,CAACzB,SAAP,CAAiB;AACnCY,cAAI,EAAE,YAD6B;AAEnCC,kBAAQ,EAAEhB,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,uCAArB,CAFyB;AAGnCW,iBAAO,EAAE7B,GAAG,CAACK,iBAAJ,CAAsBkJ,IAAtB;AAH0B,SAAjB,CAAtB;AAKH;;AAED,UAAIzC,SAAS,CAACqD,aAAV,EAAJ,EAA+B;AAC3BxJ,aAAK,CAACC,GAAN,CAAU,WAAV,EAAuBgB,+DAAM,CAACzB,SAAP,CAAiB;AACpCY,cAAI,EAAE,qBAD8B;AAEpCC,kBAAQ,EAAEhB,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,4CAArB,CAF0B;AAGpCW,iBAAO,EAAE,mBAAM;AACX,iBAAI,CAACL,KAAL,CAAWsF,SAAX,GAAuBjE,UAAU,CAACuH,kBAAX,CAA8BtD,SAA9B,CAAvB;AACH;AALmC,SAAjB,CAAvB;AAOH;;AAED,UAAIA,SAAS,CAACuD,UAAV,EAAJ,EAA4B;AACxB1J,aAAK,CAACC,GAAN,CAAU,QAAV,EAAoBgB,+DAAM,CAACzB,SAAP,CAAiB;AACjCY,cAAI,EAAE,qBAD2B;AAEjCC,kBAAQ,EAAEhB,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,yCAArB,CAFuB;AAGjCW,iBAAO,EAAE,mBAAM;AACXgB,sBAAU,CAACyH,eAAX,CAA2BxD,SAA3B;AACH;AALgC,SAAjB,CAApB;AAOH;;AAED,UAAIA,SAAS,CAACmC,SAAV,MAAyBnC,SAAS,CAACoC,QAAV,EAA7B,EAAmD;AAC/CvI,aAAK,CAACC,GAAN,CAAU,QAAV,EAAoBgB,+DAAM,CAACzB,SAAP,CAAiB;AACjCY,cAAI,EAAE,iBAD2B;AAEjCC,kBAAQ,EAAEhB,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,yCAArB,CAFuB;AAGjCW,iBAAO,EAAE,mBAAM;AACX,iBAAI,CAACL,KAAL,CAAWsF,SAAX,GAAuBjE,UAAU,CAAC0H,eAAX,CAA2BzD,SAA3B,CAAvB;AACH;AALgC,SAAjB,CAApB;AAOH;;AAED,UAAIA,SAAS,CAAC0D,WAAV,EAAJ,EAA6B;AACzB7J,aAAK,CAACC,GAAN,CAAU,SAAV,EAAqBgB,+DAAM,CAACzB,SAAP,CAAiB;AAClCY,cAAI,EAAE,eAD4B;AAElCC,kBAAQ,EAAEhB,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,0CAArB,CAFwB;AAGlCW,iBAAO,EAAE,mBAAM;AACX,iBAAI,CAACL,KAAL,CAAWsF,SAAX,GAAuBjE,UAAU,CAAC4H,gBAAX,CAA4B3D,SAA5B,CAAvB;AACH;AALiC,SAAjB,CAArB;AAOH;;AAED,UAAIA,SAAS,CAAC4D,WAAV,EAAJ,EAA6B;AACzB/J,aAAK,CAACC,GAAN,CAAU,SAAV,EAAqBgB,+DAAM,CAACzB,SAAP,CAAiB;AAClCY,cAAI,EAAE,oBAD4B;AAElCC,kBAAQ,EAAEhB,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,0CAArB,CAFwB;AAGlCW,iBAAO,EAAE,mBAAM;AACX,iBAAI,CAACL,KAAL,CAAWsF,SAAX,GAAuBjE,UAAU,CAAC8H,gBAAX,CAA4B7D,SAA5B,CAAvB;AACH;AALiC,SAAjB,CAArB;AAOH;AACJ;;AAED,QAAIA,SAAS,CAAC8D,OAAV,MAAuB,CAAClI,SAA5B,EAAuC;AACnC/B,WAAK,CAACC,GAAN,CAAU,WAAV,EAAuBgB,+DAAM,CAACzB,SAAP,CAAiB;AACpC6F,gBAAQ,EAAE,IAD0B;AAEpCjF,YAAI,EAAE,sBAF8B;AAGpCC,gBAAQ,EAAEhB,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,uDAArB;AAH0B,OAAjB,CAAvB;AAKH;;AAED,QAAI4F,SAAS,CAAC+D,WAAV,MAA2BnI,SAA/B,EAA0C;AACtC/B,WAAK,CAACC,GAAN,CAAU,WAAV,EAAuBgB,+DAAM,CAACzB,SAAP,CAAiB;AACpCY,YAAI,EAAE,sBAD8B;AAEpCC,gBAAQ,EAAEhB,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,4CAArB,CAF0B;AAGpCW,eAAO,EAAE,mBAAM;AACXgB,oBAAU,CAACiI,yBAAX,CAAqChE,SAArC;AACH;AALmC,OAAjB,CAAvB;AAOH;;AAED,QAAIA,SAAS,CAACiE,oBAAV,MAAoCrI,SAAxC,EAAmD;AAC/C/B,WAAK,CAACC,GAAN,CAAU,aAAV,EAAyBgB,+DAAM,CAACzB,SAAP,CAAiB;AACtCY,YAAI,EAAE,YADgC;AAEtCC,gBAAQ,EAAEhB,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,8CAArB,CAF4B;AAGtCW,eAAO,EAAE,mBAAM;AACXgB,oBAAU,CAACmI,2BAAX,CAAuClE,SAAvC;AACH;AALqC,OAAjB,CAAzB;AAOH;;AAED,WAAOnG,KAAP;AACH,G;AAED;;;;;;;;SAMAoI,M,mBAAOjC,S,EAAW;AACd,QAAMnG,KAAK,GAAG,IAAIsJ,4DAAJ,EAAd;;AAEA,QAAI,CAACnD,SAAS,CAACmE,uBAAV,EAAL,EAA0C;AACtCtK,WAAK,CAACC,GAAN,CAAU,kBAAV,EAA8B,EAAC,8DAAD;AAAO,YAAI,EAAC,oBAAZ;AACvB,YAAI,EAAC,kBADkB;AAEvB,aAAK,EAAEZ,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,uDAArB;AAFgB,QAA9B;AAGH;;AACD,QAAI,CAAC4F,SAAS,CAACoE,yBAAV,EAAL,EAA4C;AACxCvK,WAAK,CAACC,GAAN,CAAU,oBAAV,EAAgC,EAAC,8DAAD;AAAO,YAAI,EAAC,2BAAZ;AAC3B,YAAI,EAAC,oBADsB;AAE3B,aAAK,EAAEZ,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,yDAArB;AAFoB,QAAhC;AAGH;;AACD,QAAI,CAAC4F,SAAS,CAACuC,0BAAV,EAAL,EAA6C;AACzC1I,WAAK,CAACC,GAAN,CAAU,cAAV,EAA0B,EAAC,8DAAD;AAAO,YAAI,EAAC,6BAAZ;AACrB,YAAI,EAAC,cADgB;AAErB,aAAK,EAAEZ,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,kDAArB;AAFc,QAA1B;AAGH;;AACD,QAAI4F,SAAS,CAACqE,UAAV,EAAJ,EAA4B;AACxBxK,WAAK,CAACC,GAAN,CAAU,YAAV,EAAwB,EAAC,8DAAD;AAAO,YAAI,EAAC,sBAAZ;AACpB,YAAI,EAAC,YADe;AAEpB,aAAK,EAAEZ,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,gDAArB;AAFa,QAAxB;AAGH,KAJD,MAIO,IAAI4F,SAAS,CAAC8D,OAAV,EAAJ,EAAyB;AAC5BjK,WAAK,CAACC,GAAN,CAAU,SAAV,EAAqB,EAAC,8DAAD;AAAO,YAAI,EAAC,oBAAZ;AACjB,YAAI,EAAC,SADY;AAEjB,aAAK,EAAEZ,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,6CAArB;AAFU,QAArB;AAGH;;AACD,QAAI4F,SAAS,CAACqC,OAAV,EAAJ,EAAyB;AACrBxI,WAAK,CAACC,GAAN,CAAU,SAAV,EAAqB,EAAC,8DAAD;AAAO,YAAI,EAAC,6BAAZ;AACjB,YAAI,EAAC,SADY;AAEjB,aAAK,EAAEZ,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,6CAArB;AAFU,QAArB;AAGH;;AACD,QAAI4F,SAAS,CAACmC,SAAV,MAAyBnC,SAAS,CAACoC,QAAV,EAA7B,EAAmD;AAC/CvI,WAAK,CAACC,GAAN,CAAU,UAAV,EAAsB,EAAC,8DAAD;AAAO,YAAI,EAAC,0BAAZ;AAClB,YAAI,EAAC,UADa;AAElB,aAAK,EAAEZ,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,8CAArB,EAAqE;AAACkK,aAAG,EAAEtE,SAAS,CAAC8C,eAAV;AAAN,SAArE;AAFW,QAAtB;AAGH;;AACD,QAAI9C,SAAS,CAACsC,SAAV,EAAJ,EAA2B;AACvBzI,WAAK,CAACC,GAAN,CAAU,WAAV,EAAuB,EAAC,8DAAD;AAAO,YAAI,EAAC,cAAZ;AACnB,YAAI,EAAC,WADc;AAEnB,aAAK,EAAEZ,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,+CAArB;AAFY,QAAvB;AAGH;;AACD,QAAI4F,SAAS,CAACmC,SAAV,MAAyB,CAACnC,SAAS,CAACkC,OAAV,EAA9B,EAAmD;AAC/CrI,WAAK,CAACC,GAAN,CAAU,WAAV,EAAuB,EAAC,8DAAD;AAAO,YAAI,EAAC,oBAAZ;AACnB,YAAI,EAAC,WADc;AAEnB,aAAK,EAAEZ,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,+CAArB;AAFY,QAAvB;AAGH;;AACD,QAAI4F,SAAS,CAACkC,OAAV,EAAJ,EAAyB;AACrBrI,WAAK,CAACC,GAAN,CAAU,SAAV,EAAqB,EAAC,8DAAD;AAAO,YAAI,EAAC,qBAAZ;AACjB,YAAI,EAAC,SADY;AAEjB,aAAK,EAAEZ,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,6CAArB;AAFU,QAArB;AAGH;;AAED,WAAOP,KAAP;AACH,G;;;EAxQ0CwB,uD;;;;;;;;;;;;;;;;;;;;;;ACP/C;AACA;AACA;;IAEqBe,e;;;;;;;;;;;SACjBd,I,mBAAO;AAAA;;AACH,SAAKiJ,cAAL,GAAsBC,+DAAQ,CAAC,YAAM;AACjC,UAAI,KAAI,CAAC9J,KAAL,CAAW2B,QAAf,EAAyB,KAAI,CAAC3B,KAAL,CAAW2B,QAAX,CAAoB,KAAI,CAAC3B,KAAL,CAAWoB,MAA/B;AAC5B,KAF6B,EAE3B,GAF2B,CAA9B;AAGH,G;;SAEDtB,I,mBAAO;AAAA;;AACH,WAAOhB,CAAC,CAAC,KAAD,EAAQ,CACZA,CAAC,CAAC,UAAD,EAAa;AAACoB,eAAS,EAAE;AAAZ,KAAb,EACGpB,CAAC,CAAC,8BAAD,EAAiC;AAC9BiL,WAAK,EAAE,KAAK/J,KAAL,CAAWoB,MAAX,CAAkBgB,CAAlB,IAAuB,EADA;AAE9B4H,aAAO,EAAElL,CAAC,CAACmL,QAAF,CAAW,OAAX,EAAoB,UAAAC,IAAI;AAAA,eAAI,MAAI,CAACzI,MAAL,CAAYyI,IAAZ,CAAJ;AAAA,OAAxB,CAFqB;AAG9BC,iBAAW,EAAE3L,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,yCAArB;AAHiB,KAAjC,CADJ,CADW,EAQZZ,CAAC,CAAC,KAAD,EAAQ;AAACoB,eAAS,EAAE;AAAZ,KAAR,EAAqD,CAClD6D,uDAAc,CAACpF,SAAf,CAAyB;AACrBY,UAAI,EAAE,iBADe;AAErBW,eAAS,EAAE,gBAFU;AAGrBiE,WAAK,EAAE,KAAKiG,SAAL,CAAe,QAAf,CAHc;AAIrB3F,cAAQ,EAAE,kBAAC4F,OAAD;AAAA,eAAa,MAAI,CAACC,YAAL,CAAkB,QAAlB,EAA4BD,OAA5B,CAAb;AAAA,OAJW;AAKrB7K,cAAQ,EAAEhB,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,2CAArB;AALW,KAAzB,CADkD,EAQlDqE,uDAAc,CAACpF,SAAf,CAAyB;AACrBY,UAAI,EAAE,qBADe;AAErBW,eAAS,EAAE,gBAFU;AAGrBiE,WAAK,EAAE,KAAKiG,SAAL,CAAe,SAAf,CAHc;AAIrB3F,cAAQ,EAAE,kBAAC4F,OAAD;AAAA,eAAa,MAAI,CAACC,YAAL,CAAkB,SAAlB,EAA6BD,OAA7B,CAAb;AAAA,OAJW;AAKrB7K,cAAQ,EAAEhB,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,4CAArB;AALW,KAAzB,CARkD,EAelDqE,uDAAc,CAACpF,SAAf,CAAyB;AACrBY,UAAI,EAAE,oBADe;AAErBW,eAAS,EAAE,gBAFU;AAGrBiE,WAAK,EAAE,KAAKiG,SAAL,CAAe,WAAf,CAHc;AAIrB3F,cAAQ,EAAE,kBAAC4F,OAAD;AAAA,eAAa,MAAI,CAACC,YAAL,CAAkB,WAAlB,EAA+BD,OAA/B,CAAb;AAAA,OAJW;AAKrB7K,cAAQ,EAAEhB,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,8CAArB;AALW,KAAzB,CAfkD,EAsBlD,KAAKwB,SAAL,GAAiB,CACb6C,uDAAc,CAACpF,SAAf,CAAyB;AACrBY,UAAI,EAAE,cADe;AAErBW,eAAS,EAAE,gBAFU;AAGrBiE,WAAK,EAAE,KAAKiG,SAAL,CAAe,WAAf,CAHc;AAIrB3F,cAAQ,EAAE,kBAAC4F,OAAD;AAAA,eAAa,MAAI,CAACC,YAAL,CAAkB,WAAlB,EAA+BD,OAA/B,CAAb;AAAA,OAJW;AAKrB7K,cAAQ,EAAEhB,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,8CAArB;AALW,KAAzB,CADa,EAQbqE,uDAAc,CAACpF,SAAf,CAAyB;AACrBY,UAAI,EAAE,sBADe;AAErBW,eAAS,EAAE,gBAFU;AAGrBiE,WAAK,EAAE,KAAKiG,SAAL,CAAe,YAAf,CAHc;AAIrB3F,cAAQ,EAAE,kBAAC4F,OAAD;AAAA,eAAa,MAAI,CAACC,YAAL,CAAkB,YAAlB,EAAgCD,OAAhC,CAAb;AAAA,OAJW;AAKrB7K,cAAQ,EAAEhB,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,+CAArB;AALW,KAAzB,CARa,CAAjB,GAeI,EArC8C,EAsClDqE,uDAAc,CAACpF,SAAf,CAAyB;AACrBY,UAAI,EAAE,oBADe;AAErBW,eAAS,EAAE,gBAFU;AAGrBiE,WAAK,EAAE,KAAKiG,SAAL,CAAe,SAAf,CAHc;AAIrB3F,cAAQ,EAAE,kBAAC4F,OAAD;AAAA,eAAa,MAAI,CAACC,YAAL,CAAkB,SAAlB,EAA6BD,OAA7B,CAAb;AAAA,OAJW;AAKrB7K,cAAQ,EAAEhB,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,4CAArB;AALW,KAAzB,CAtCkD,CAArD,CARW,CAAR,CAAR;AAuDH,G;;SAED0K,S,sBAAUrC,I,EAAM;AACZ,QAAM1F,MAAM,GAAG,KAAKrC,KAAL,CAAWoB,MAAX,CAAkBiB,MAAlB,IAA4B,EAA3C;AACA,QAAMkI,EAAE,GAAGlI,MAAM,CAACkI,EAAP,IAAa,EAAxB;AAEA,WAAOA,EAAE,CAACC,OAAH,CAAWzC,IAAX,KAAoB,CAA3B;AACH,G;;SAEDuC,Y,yBAAavC,I,EAAMsC,O,EAAS;AACxB,QAAIhI,MAAM,GAAG,KAAKrC,KAAL,CAAWoB,MAAX,CAAkBiB,MAAlB,IAA4B,EAAzC;AACA,QAAIkI,EAAE,GAAGlI,MAAM,CAACkI,EAAP,IAAa,EAAtB;AAEA,QAAME,CAAC,GAAGF,EAAE,CAACC,OAAH,CAAWzC,IAAX,CAAV;;AAEA,QAAIsC,OAAO,IAAII,CAAC,KAAK,CAAC,CAAtB,EAAyB;AACrBF,QAAE,CAAClH,IAAH,CAAQ0E,IAAR;AACH,KAFD,MAEO,IAAI,CAACsC,OAAD,IAAYI,CAAC,IAAI,CAArB,EAAwB;AAC3BF,QAAE,CAACG,MAAH,CAAUD,CAAV,EAAa,CAAb;AACH;;AAEDpI,UAAM,CAACkI,EAAP,GAAYA,EAAZ;AAEA,SAAKvK,KAAL,CAAWoB,MAAX,CAAkBiB,MAAlB,GAA2BA,MAA3B;AAEA,SAAKwH,cAAL;AACH,G;;SAEDpI,M,mBAAOyI,I,EAAM;AACT,SAAKlK,KAAL,CAAWoB,MAAX,CAAkBgB,CAAlB,GAAsB8H,IAAtB;AAEA,SAAKL,cAAL;AACH,G;;;EA/FwClJ,uD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJ7C;AACA;AACA;AACA;AACA;AACA;;IAEqBgK,Y;;;;;;;;;;;SACjB/J,I,mBAAO;AACH,SAAKgK,QAAL,GAAgB9L,CAAC,CAACqC,IAAF,CAAO,KAAP,CAAhB;AACH,G;;SAEDrB,I,mBAAO;AAAA;;AACH,QAAM+K,IAAI,GAAG,KAAK7K,KAAL,CAAW6K,IAAxB;;AACA,QAAMvG,QAAQ,GAAI,YAAW;AACzB,cAAQuG,IAAI,CAACC,MAAL,EAAR;AACI,aAAK,SAAL;AACI,iBAAO,cAAP;;AACJ,aAAK,WAAL;AACI,iBAAO,oBAAP;;AACJ,aAAK,SAAL;AACI,iBAAO,gBAAP;AANR;;AAQA,aAAO,cAAP;AACH,KAVgB,EAAjB,CAFG,CAcH;AACA;AACA;;;AACA,WACI;AAAO,eAAS,EAAG,yBAAyBD,IAAI,CAACC,MAAL;AAA5C,OACI,cACI;AAAI,eAAS,EAAC;AAAd,OAA8BC,+DAAS,CAACF,IAAI,CAACG,UAAL,EAAD,CAAvC,CADJ,EAEI;AAAI,eAAS,EAAC,eAAd;AAA8B,WAAK,EAAGxM,iDAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,4CAA4CmL,IAAI,CAACC,MAAL,OAAkB,IAAlB,GAAyBD,IAAI,CAACC,MAAL,EAAzB,GAAyC,SAArF,CAArB;AAAtC,OAA8J;AAAK,eAAS,EAAC;AAAf,OAA0BvL,0DAAI,CAAC+E,QAAD,CAA9B,CAA9J,CAFJ,EAGI;AAAI,eAAS,EAAC;AAAd,OACM9F,iDAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,4CAA4CmL,IAAI,CAACI,OAAL,EAAjE,EAAiF;AAAC3F,eAAS,EAAG,kBAAUuF,IAAI,CAACpF,OAAL,EAAV;AAAb,KAAjF,CADN,CAHJ,EAMI;AAAI,eAAS,EAAC;AAAd,OACMrF,+DAAM,CAACzB,SAAP,CAAiB;AACfY,UAAI,EAAE,aADS;AAEfW,eAAS,EAAE,QAFI;AAGfG,aAAO,EAAE,mBAAM;AAAE,aAAI,CAACuK,QAAL,CAAc,CAAC,KAAI,CAACA,QAAL,EAAf;AAAkC;AAHpC,KAAjB,CADN,CANJ,CADJ,EAeM,KAAKA,QAAL,KACE,cACI;AAAI,eAAS,EAAC,eAAd;AAA8B,aAAO,EAAC;AAAtC,OACI,cACI,cAAMpM,iDAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,qDAArB,CAAN,CADJ,EAEI,cAAMwL,8DAAQ,CAACL,IAAI,CAACG,UAAL,EAAD,CAAd,CAFJ,CADJ,EAKI,cACI,cAAMxM,iDAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,qDAArB,CAAN,CADJ,EAEI,cAAMwL,8DAAQ,CAACL,IAAI,CAACM,UAAL,EAAD,CAAd,CAFJ,CALJ,EASI,cACI,cAAM3M,iDAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,sDAArB,CAAN,CADJ,EAEI,cAAMwL,8DAAQ,CAACL,IAAI,CAACO,WAAL,EAAD,CAAd,CAFJ,CATJ,EAaI,aAAK5M,iDAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,8CAArB,CAAL,CAbJ,EAcI;AAAK,eAAS,EAAC;AAAf,OAA0BmL,IAAI,CAACQ,MAAL,EAA1B,CAdJ,CADJ,CADF,GAmBE,IAlCR,CADJ;AAsCH,G;;;EA5DqC1K,uD;;;;;;;;;;;;;;;;;;;;;;;;;;ACP1C;AACA;AACA;AACA;AACA;AACA;;IAEqBf,S;;;;;;;;;;;SACjBgB,I,mBAAO;AACH;AACApC,qDAAG,CAACqC,OAAJ,GAAc,IAAd;AAEA,SAAKZ,OAAL,GAAenB,CAAC,CAACqC,IAAF,CAAO,KAAP,CAAf;AACA,SAAKE,UAAL,GAAkB,IAAIiK,6DAAJ,CAAmB,KAAKrL,OAAxB,CAAlB;AACA,SAAKoB,UAAL,CAAgBkK,YAAhB;AACA,SAAKC,MAAL,GAAc3L,qDAAY,CAAClB,SAAb,CAAuB;AAACsB,aAAO,EAAE,KAAKA;AAAf,KAAvB,CAAd;AACA,SAAKiB,SAAL,GAAiB1C,iDAAG,CAACuC,IAAJ,CAASC,QAAT,CAAkB,0BAAlB,KAAiDxC,iDAAG,CAACuC,IAAJ,CAASC,QAAT,CAAkB,0BAAlB,MAAkD,GAApH;AACH,G;;SAEDlB,I,mBAAO;AACH,WACI;AAAK,eAAS,EAAC;AAAf,OACKiC,yDAAgB,CAACpD,SAAjB,CAA2B;AAACuC,eAAS,EAAE,KAAKA;AAAjB,KAA3B,CADL,EAGI;AAAK,eAAS,EAAC;AAAf,OACI;AAAK,eAAS,EAAC;AAAf,OACM,KAAKuK,UAAL,GAAkBpG,GAAlB,CACE,UAAAqG,KAAK;AAAA,aAAIA,KAAK,CAACC,KAAN,CAAY1K,MAAZ,GACL,eACI,cAAMyK,KAAK,CAAC7H,KAAZ,CADJ,EAEI;AAAO,iBAAS,EAAC;AAAjB,SACI,iBACA,cACI;AAAI,iBAAS,EAAC;AAAd,SAA8BrF,iDAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,4CAArB,CAA9B,CADJ,EAEI;AAAI,iBAAS,EAAC;AAAd,SAAgClB,iDAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,8CAArB,CAAhC,CAFJ,EAGI,cAAMlB,iDAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,+CAArB,CAAN,CAHJ,EAII;AAAI,iBAAS,EAAC;AAAd,SAAiClB,iDAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,+CAArB,CAAjC,CAJJ,CADA,CADJ,EASMgM,KAAK,CAACC,KAAN,CAAYtG,GAAZ,CACE,UAAAwF,IAAI;AAAA,eAAI/L,CAAC,CAAC6L,qDAAD,EAAe;AAACE,cAAI,EAAEA;AAAP,SAAf,CAAL;AAAA,OADN,CATN,CAFJ,CADK,GAiBL,IAjBC;AAAA,KADP,CADN,CADJ,CAHJ,EA2BM,KAAKW,MA3BX,CADJ;AA+BH,G;AAED;;;;;SAGAC,U,yBAAa;AACT,QAAIA,UAAU,GAAG,CACb;AACI5H,WAAK,EAAErF,iDAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,4CAArB,CADX;AAEIiM,WAAK,EAAE;AAFX,KADa,EAKb;AACI9H,WAAK,EAAErF,iDAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,gDAArB,CADX;AAEIiM,WAAK,EAAE;AAFX,KALa,EASb;AACI9H,WAAK,EAAErF,iDAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,4CAArB,CADX;AAEIiM,WAAK,EAAE;AAFX,KATa,CAAjB;AAcA,QAAIC,YAAY,GAAG,CAAnB,CAfS,CAiBT;;AACA,QAAMC,KAAK,GAAI,IAAIC,IAAJ,EAAD,CAAaC,QAAb,CAAsB,CAAtB,EAAwB,CAAxB,EAA0B,CAA1B,EAA4B,CAA5B,CAAd;AAEA,SAAK1K,UAAL,CAAgBsK,KAAhB,GAAwBK,OAAxB,CAAgC,UAAAnB,IAAI,EAAI;AACpC;AACA,UAAMoB,QAAQ,GAAG,IAAIH,IAAJ,CAASjB,IAAI,CAACG,UAAL,EAAT,EAA4Be,QAA5B,CAAqC,CAArC,EAAuC,CAAvC,EAAyC,CAAzC,EAA2C,CAA3C,CAAjB;;AAEA,cAAQH,YAAR;AACI,aAAK,CAAL;AACI,cAAIK,QAAQ,KAAKJ,KAAjB,EAAwB;AACpBJ,sBAAU,CAACG,YAAD,CAAV,CAAyBD,KAAzB,CAA+BtI,IAA/B,CAAoCwH,IAApC;AACH,WAFD,MAEO;AACHe,wBAAY;AACf;;AACD;;AACJ,aAAK,CAAL;AACI;AACA,cAAI,CAACC,KAAK,GAAGI,QAAT,KAAsB,OAAO,IAAP,GAAc,EAApC,KAA2C,EAA/C,EAAmD;AAC/CR,sBAAU,CAACG,YAAD,CAAV,CAAyBD,KAAzB,CAA+BtI,IAA/B,CAAoCwH,IAApC;AACH,WAFD,MAEO;AACHe,wBAAY;AACf;;AACD;;AACJ;AACIH,oBAAU,CAACG,YAAD,CAAV,CAAyBD,KAAzB,CAA+BtI,IAA/B,CAAoCwH,IAApC;AAjBR;AAmBH,KAvBD;AAyBA,WAAOY,UAAP;AACH,G;;;EA/FkC9K,uD;;;;;;;;;;;;;;ACPvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEAnC,iDAAG,CAAC0N,YAAJ,CAAiB9M,GAAjB,CAAqB,gBAArB,EAAuC,UAAAZ,GAAG,EAAI;AAC1CA,KAAG,CAAC6H,KAAJ,CAAU8F,MAAV,CAAiB,mBAAjB,IAAwCC,yDAAxC;AACA5N,KAAG,CAAC6H,KAAJ,CAAU8F,MAAV,CAAiB,cAAjB,IAAmCE,oDAAnC;AAEAC,gEAAa;AACbC,+DAAY;AACf,CAND,E;;;;;;;;;;;;;;;;;;;;ACPA;AACA;;IAEqB7I,kB;;;;;;;;;;;SACjBxD,S,wBAAY;AACR,WAAO,sBAAP;AACH,G;;SAED2D,K,oBAAQ;AACJ,WAAOrF,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,iDAArB,CAAP;AACH,G;;SAED8M,O,sBAAU;AACN,QAAIhJ,WAAW,GAAG,KAAKxD,KAAL,CAAWwD,WAA7B;AAEA,WAAO1E,CAAC,CAAC,KAAD,EAAQ;AAACoB,eAAS,EAAE;AAAZ,KAAR,EAAmC,CACnCpB,CAAC,CAAC,GAAD,EAAMN,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,uDAArB,EAA8E;AAAC+M,UAAI,EAAEjJ;AAAP,KAA9E,CAAN,CADkC,EAEnC1E,CAAC,CAAC,KAAD,EAAQ;AAACoB,eAAS,EAAE;AAAZ,KAAR,EAA2C,CACxCE,+DAAM,CAACzB,SAAP,CAAiB;AACbyF,UAAI,EAAE,QADO;AAEblE,eAAS,EAAE,sCAFE;AAGbsE,cAAQ,EAAE,KAHG;AAIbjF,UAAI,EAAE,OAJO;AAKbC,cAAQ,EAAEhB,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,0CAArB;AALG,KAAjB,CADwC,CAA3C,CAFkC,CAAnC,CAAR;AAaH,G;;SAEDgN,O,sBAAU;AACN,QAAIC,KAAK,GAAG7F,MAAM,CAACyB,IAAP,EAAZ;AAEA/J,OAAG,CAACoO,OAAJ,CAAY;AACRC,YAAM,EAAE,KADA;AAERC,SAAG,EAAEtO,GAAG,CAACuO,KAAJ,CAAUC,SAAV,CAAoB,QAApB,IAAgC;AAF7B,KAAZ,EAGGpH,IAHH,CAGQ,UAAAqH,QAAQ,EAAI;AAChB,UAAIA,QAAQ,IAAIA,QAAQ,CAACC,QAAzB,EAAmC;AAC/BP,aAAK,CAACrM,QAAN,GAAiB2M,QAAQ,CAACC,QAA1B;AACH,OAFD,MAEO;AACHP,aAAK,CAACQ,KAAN;AACH;AACJ,KATD;AAUH,G;AAED;;;;;;;SAKAxL,Q,uBAAW;AACP,SAAK+K,OAAL;AACH,G;;;EAjD2CU,8D;;;;;;;;;;;;;;;;;;;;;;;;ACHhD;AACA;AACA;;IAEqBrK,mB;;;;;;;;;;;SAEnBc,K,oBAAQ;AACN,WAAOrF,iDAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,2CAArB,CAAP;AACD,G;;SAED2N,I,mBAAO;AACL,WAAO,CACLvO,CAAC,CAAC,KAAD,EAAQ;AAAEoB,eAAS,EAAE;AAAb,KAAR,EAAqC,CACpCpB,CAAC,CAAC,OAAD,EAAU;AAAEwO,SAAG,EAAE;AAAP,KAAV,EAA+B9O,iDAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,oEAArB,CAA/B,CADmC,EAEpC6N,+DAAM,CAAC5O,SAAP,CAAiB;AACfwF,WAAK,EAAE,KAAKqJ,OAAL,CAAa,mCAAb,GADQ;AAEf/I,cAAQ,EAAE,KAAK+I,OAAL,CAAa,mCAAb,CAFK;AAGfhO,cAAQ,EAAEhB,iDAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,qEAArB;AAHK,KAAjB,CAFoC,EAOpCZ,CAAC,CAAC,MAAD,EAASN,iDAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,0EAArB,EAAiG;AACzG+N,OAAC,EAAE;AAAG,YAAI,EAAC,6DAAR;AAAsE,cAAM,EAAC;AAA7E;AADsG,KAAjG,CAAT,CAPmC,CAArC,CADI,EAYL3O,CAAC,CAAC,KAAD,EAAQ;AAAEoB,eAAS,EAAE;AAAb,KAAR,EAAqC,CACpCpB,CAAC,CAAC,OAAD,EAAU;AAAEwO,SAAG,EAAE;AAAP,KAAV,EAAuC9O,iDAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,uDAArB,CAAvC,CADmC,EAEpCZ,CAAC,CAAC,OAAD,EAAU;AACTgJ,QAAE,EAAE,kBADK;AAET5H,eAAS,EAAE,aAFF;AAGTwN,UAAI,EAAE,KAAKF,OAAL,CAAa,0BAAb;AAHG,KAAV,CAFmC,EAOpC1O,CAAC,CAAC,MAAD,EAASN,iDAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,6DAArB,CAAT,CAPmC,CAArC,CAZI,CAAP;AAsBD,G;;;EA7B8CiO,sE;;;;;;;;;;;;;;;;;;;;;;;;;;ACJjD;AACA;AACA;AACA;;IAEqBlK,c;;;;;;;;;;;SACnBI,K,oBAAQ;AACN,WAAOrF,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,4CAArB,CAAP;AACD,G;;SAED2N,I,mBAAO;AACL,QAAM7J,WAAW,GAAG,KAAKxD,KAAL,CAAWwD,WAA/B;AACA,QAAMoK,OAAO,GAAG,KAAKJ,OAAL,CAAa,qBAAb,EAAoC,KAApC,CAAhB;AAEA,WAAO1O,CAAC,CAAC,KAAD,EAAQ;AAAEoB,eAAS,EAAE;AAAb,KAAR,EAAqC,CACzCpB,CAAC,CAAC,GAAD,EAAMN,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,uDAArB,EAA8E;AAAE+M,UAAI,EAAEjJ;AAAR,KAA9E,CAAN,CADwC,EAEzC+J,+DAAM,CAAC5O,SAAP,CAAiB;AACfwF,WAAK,EAAGyJ,OAAO,OAAO,IAAd,IAAsBA,OAAO,MAAM,CAD5B;AAEfnJ,cAAQ,EAAE,KAAKoJ,aAAL,CAAmBhM,IAAnB,CAAwB,IAAxB,EAA8B+L,OAA9B,EAAuC,qBAAvC,CAFK;AAGfpO,cAAQ,EAAEhB,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,kDAArB,EAAyE;AAAE+M,YAAI,EAAEjJ;AAAR,OAAzE;AAHK,KAAjB,CAFyC,CAArC,CAAR;AASD,G;;SAEDsK,Y,2BAAe;AACb,QAAMtK,WAAW,GAAG,KAAKxD,KAAL,CAAWwD,WAA/B;AACA,WAAO1E,CAAC,CAAC,KAAD,EAAQ;AAACoB,eAAS,EAAE;AAAZ,KAAR,EAAoC,CAC1CE,+DAAM,CAACzB,SAAP,CAAiB;AACfuB,eAAS,EAAE,kBADI;AAEfX,UAAI,EAAE,WAFS;AAGfC,cAAQ,EAAEhB,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,6DAArB,CAHK;AAIfW,aAAO,EAAE;AAAA,eAAMyG,MAAM,CAACyB,IAAP,CAAY/E,WAAW,GAAG,OAA1B,CAAN;AAAA;AAJM,KAAjB,CAD0C,CAApC,CAAR;AAQD,G;AAED;;;;;;;;SAMAqK,a,0BAAc1M,I,EAAMqM,O,EAASzD,K,EAAO;AAAA;;AAClCgE,oEAAY,oCACTP,OADS,IACCzD,KADD,iBAAZ;AAIA5I,QAAI,CAAC4I,KAAD,CAAJ;AACD,G;;;EA5CyC4D,sE;;;;;;;;;;;;;;;;;;;;ACL5C;;IAEqBpK,oB;;;;;;;;;;;SACjBrD,S,wBAAY;AACR,WAAO,sBAAP;AACH,G;;SAED2D,K,oBAAQ;AACJ,WAAOrF,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,gEAArB,CAAP;AACH,G;;SAED8M,O,sBAAU;AACN,QAAIwB,WAAW,GAAG,KAAKhO,KAAL,CAAWmD,gBAA7B;AACA,QAAI8K,KAAK,GAAG,EAAZ;AAEAD,eAAW,CAAChC,OAAZ,CAAoB,UAAAtN,IAAI,EAAI;AACxBuP,WAAK,CAAC5K,IAAN,CAAWvE,CAAC,CAAC,IAAD,EAAOA,CAAC,CAAC,MAAD,EAAS;AAACoB,iBAAS,EAAE;AAAZ,OAAT,EAA8BxB,IAA9B,CAAR,CAAZ;AACH,KAFD;AAIA,WAAOI,CAAC,CAAC,KAAD,EAAQ;AAACoB,eAAS,EAAE;AAAZ,KAAR,EAAmC,CACnCpB,CAAC,CAAC,GAAD,EAAMN,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CACH,sEADG,EAEH;AAAC+N,OAAC,EAAE;AAAG,YAAI,EAAC,yDAAR;AAAkE,cAAM,EAAC;AAAzE;AAAJ,KAFG,CAAN,CADkC,EAKnC3O,CAAC,CAAC,IAAD,EAAOmP,KAAP,CALkC,CAAnC,CAAR;AAQH,G;;;EAzB6Cb,8D;;;;;;;;;;;;;;;;;;;;ACFlD;;IAEqB9J,gB;;;;;;;;;;;SACjBpD,S,wBAAY;AACR,WAAO,kBAAP;AACH,G;;SAED2D,K,oBAAQ;AACJ,WAAOrF,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,gEAArB,CAAP;AACH,G;;SAED8M,O,sBAAU;AACN,QAAItJ,gBAAgB,GAAG,KAAKlD,KAAL,CAAWkD,gBAAlC;AACA,QAAID,YAAY,GAAG,KAAKjD,KAAL,CAAWiD,YAA9B;AAEA,WAAOnE,CAAC,CACJ,KADI,EAEJ;AAACoB,eAAS,EAAE;AAAZ,KAFI,EAGJ1B,GAAG,CAACiB,UAAJ,CAAeC,KAAf,CACI,sEADJ,EAEI;AACIwO,cAAQ,EAAEhL,gBADd;AAEIiL,WAAK,EAAElL,YAFX;AAGIwK,OAAC,EAAE;AAAG,YAAI,EAAC,yDAAR;AAAkE,cAAM,EAAC;AAAzE;AAHP,KAFJ,CAHI,CAAR;AAYH,G;;;EAzByCL,8D;;;;;;;;;;;;;;;;;;;;;;;;ACF9C;AACA;AACA;;IAEqBhB,S;;;;;;;;;;EAAkBgC,yDAAK,CAACC,mDAAD,EAAQ;AAChD5I,SAAO,EAAE4I,mDAAK,CAACrB,SAAN,CAAgB,SAAhB,CADuC;AAEhDnJ,OAAK,EAAEwK,mDAAK,CAACrB,SAAN,CAAgB,OAAhB,CAFyC;AAGhDrN,aAAW,EAAE0O,mDAAK,CAACrB,SAAN,CAAgB,aAAhB,CAHmC;AAIhDsB,SAAO,EAAED,mDAAK,CAACrB,SAAN,CAAgB,SAAhB,CAJuC;AAKhDzN,MAAI,EAAE8O,mDAAK,CAACrB,SAAN,CAAgB,MAAhB,CAL0C;AAMhDuB,QAAM,EAAEF,mDAAK,CAACrB,SAAN,CAAgB,QAAhB,CANwC;AAQhD1E,cAAY,EAAE+F,mDAAK,CAACrB,SAAN,CAAgB,cAAhB,CARkC;AAShDxE,cAAY,EAAE6F,mDAAK,CAACrB,SAAN,CAAgB,cAAhB,CATkC;AAWhD/E,WAAS,EAAEoG,mDAAK,CAACrB,SAAN,CAAgB,WAAhB,CAXqC;AAahDvF,WAAS,EAAE4G,mDAAK,CAACrB,SAAN,CAAgB,WAAhB,CAbqC;AAchDxF,SAAO,EAAE6G,mDAAK,CAACrB,SAAN,CAAgB,SAAhB,CAduC;AAehDrF,SAAO,EAAE0G,mDAAK,CAACrB,SAAN,CAAgB,SAAhB,CAfuC;AAgBhD7E,mBAAiB,EAAEkG,mDAAK,CAACrB,SAAN,CAAgB,mBAAhB,CAhB6B;AAiBhD5E,iBAAe,EAAEiG,mDAAK,CAACrB,SAAN,CAAgB,iBAAhB,CAjB+B;AAkBhDtF,UAAQ,EAAE2G,mDAAK,CAACrB,SAAN,CAAgB,UAAhB,CAlBsC;AAoBhDwB,WAAS,EAAEH,mDAAK,CAACrB,SAAN,CAAgB,WAAhB,CApBqC;AAsBhD5D,SAAO,EAAEiF,mDAAK,CAACrB,SAAN,CAAgB,SAAhB,CAtBuC;AAuBhDrD,YAAU,EAAE0E,mDAAK,CAACrB,SAAN,CAAgB,YAAhB,CAvBoC;AAyBhD;AACA;AACA9D,aAAW,EAAEuF,4DAAQ,CAAC,WAAD,EAAc,SAAd,EAAyB,YAAzB,EAAuC,4BAAvC,EAAqE,UAAChH,SAAD,EAAY2B,OAAZ,EAAqBO,UAArB,EAAiC9B,0BAAjC;AAAA,WAAgE,CAACJ,SAAD,IAAcI,0BAAd,KAA6C,CAACuB,OAAD,IAAYO,UAAzD,CAAhE;AAAA,GAArE,CA3B2B;AA4BhDhB,eAAa,EAAE8F,4DAAQ,CAAC,WAAD,EAAc,SAAd,EAAyB,UAAChH,SAAD,EAAYD,OAAZ;AAAA,WAAwBC,SAAS,IAAI,CAACD,OAAtC;AAAA,GAAzB,CA5ByB;AA8BhD;AACAqB,YAAU,EAAE4F,4DAAQ,CAAC,WAAD,EAAc,SAAd,EAAyB,UAAChH,SAAD,EAAYD,OAAZ;AAAA,WAAwBC,SAAS,IAAI,CAACD,OAAtC;AAAA,GAAzB,CA/B4B;AAgChDwB,aAAW,EAAEyF,4DAAQ,CAAC,WAAD,EAAc,SAAd,EAAyB,UAAChH,SAAD,EAAYD,OAAZ;AAAA,WAAwBC,SAAS,IAAID,OAArC;AAAA,GAAzB,CAhC2B;AAkChD6B,aAAW,EAAEgF,mDAAK,CAACrB,SAAN,CAAgB,aAAhB,CAlCmC;AAmChD0B,gBAAc,EAAEL,mDAAK,CAACrB,SAAN,CAAgB,gBAAhB,CAnCgC;AAoChDzD,sBAAoB,EAAEkF,4DAAQ,CAAC,gBAAD,EAAmB,WAAnB,EAAgC,UAACC,cAAD,EAAiBjH,SAAjB;AAAA,WAA+BiH,cAAc,IAAI,CAACjH,SAAlD;AAAA,GAAhC,CApCkB;AAsChDS,WAAS,EAAEmG,mDAAK,CAACrB,SAAN,CAAgB,WAAhB,CAtCqC;AAuChDpF,WAAS,EAAEyG,mDAAK,CAACrB,SAAN,CAAgB,WAAhB,CAvCqC;AAyChDtD,2BAAyB,EAAE2E,mDAAK,CAACrB,SAAN,CAAgB,2BAAhB,CAzCqB;AA0ChDvD,yBAAuB,EAAE4E,mDAAK,CAACrB,SAAN,CAAgB,yBAAhB,CA1CuB;AA2ChDnF,4BAA0B,EAAEwG,mDAAK,CAACrB,SAAN,CAAgB,4BAAhB;AA3CoB,CAAR,C;;;;;;;;;;;;;;;;;;;;;;ACJ5C;AACA;;IAEqBX,I;;;;;;;;;;EAAa+B,yDAAK,CAACC,mDAAD,EAAQ;AAC3CvD,QAAM,EAAEuD,mDAAK,CAACrB,SAAN,CAAgB,QAAhB,CADmC;AAE3C/B,SAAO,EAAEoD,mDAAK,CAACrB,SAAN,CAAgB,SAAhB,CAFkC;AAG3CvH,SAAO,EAAE4I,mDAAK,CAACrB,SAAN,CAAgB,SAAhB,CAHkC;AAI3C3B,QAAM,EAAEgD,mDAAK,CAACrB,SAAN,CAAgB,QAAhB,CAJmC;AAK3ChC,YAAU,EAAEqD,mDAAK,CAACrB,SAAN,CAAgB,YAAhB,CAL+B;AAM3C7B,YAAU,EAAEkD,mDAAK,CAACrB,SAAN,CAAgB,YAAhB,CAN+B;AAO3C5B,aAAW,EAAEiD,mDAAK,CAACrB,SAAN,CAAgB,aAAhB;AAP8B,CAAR,C;;;;;;;;;;;;;;ACHvC;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;IAEqB1L,mB;;;AACjB,+BAAYrB,OAAZ,EAAqB;AACjB,SAAK4E,UAAL,GAAkB/F,CAAC,CAACqC,IAAF,CAAO,EAAP,CAAlB;AACA,SAAKlB,OAAL,GAAeA,OAAf;AACH;AAED;;;;;;;SAGA0O,Y,2BAAe;AACX;AACA;AACA,SAAK1O,OAAL,CAAa,OAAb,EAHW,CAKX;AACA;;AACAnB,KAAC,CAACiH,MAAF;AACH,G;AAED;;;;;;SAIAoD,gB,6BAAiB7D,S,EAAW;AAAA;;AACxB,SAAKrF,OAAL,CAAa,IAAb;AAEAzB,qDAAG,CAACoO,OAAJ,CAAY;AACRC,YAAM,EAAE,MADA;AAERC,SAAG,EAAEtO,iDAAG,CAACuO,KAAJ,CAAUC,SAAV,CAAoB,QAApB,IAAgC,oBAF7B;AAGR4B,aAAO,EAAE,CAHD;AAIR7N,UAAI,EAAE;AACF+G,UAAE,EAAExC,SAAS,CAACwC,EAAV;AADF;AAJE,KAAZ,EAOGlC,IAPH,CAOQ,UAAAqH,QAAQ,EAAI;AAChB,aAAO,KAAI,CAAC4B,2BAAL,CAAiC5B,QAAjC,CAAP;AACH,KATD,EASG6B,KATH,CASS;AAAA,aAAM,KAAI,CAACH,YAAL,EAAN;AAAA,KATT;AAUH,G;AAED;;;;;;SAIAI,c,2BAAezJ,S,EAAW;AACtB,SAAK0J,eAAL;AACA,SAAKzD,YAAL;AACH,G;AAED;;;;;;SAIA3C,kB,+BAAmBtD,S,EAAW;AAAA;;AAC1B,SAAKrF,OAAL,CAAa,IAAb;AAEAzB,qDAAG,CAACoO,OAAJ,CAAY;AACRC,YAAM,EAAE,QADA;AAER+B,aAAO,EAAE,CAFD;AAGR9B,SAAG,EAAEtO,iDAAG,CAACuO,KAAJ,CAAUC,SAAV,CAAoB,QAApB,IAAgC,qBAAhC,GAAwD1H,SAAS,CAACwC,EAAV;AAHrD,KAAZ,EAIGlC,IAJH,CAIQ,UAAAqH,QAAQ,EAAI;AAChB,aAAO,MAAI,CAAC4B,2BAAL,CAAiC5B,QAAjC,CAAP;AACH,KAND,EAMG6B,KANH,CAMS;AAAA,aAAM,MAAI,CAACH,YAAL,EAAN;AAAA,KANT;AAOH,G;AAED;;;;;;SAIAM,gB,6BAAiB3J,S,EAAW;AACxB,SAAK0J,eAAL;AACA,SAAKzD,YAAL;AACH,G;AAED;;;;;;SAIAlD,iB,8BAAkB/C,S,EAAW;AAAA;;AACzB,SAAKrF,OAAL,CAAa,IAAb;AAEAzB,qDAAG,CAACoO,OAAJ,CAAY;AACRC,YAAM,EAAE,MADA;AAERC,SAAG,EAAEtO,iDAAG,CAACuO,KAAJ,CAAUC,SAAV,CAAoB,QAApB,IAAgC,qBAAhC,GAAwD1H,SAAS,CAACwC,EAAV,EAAxD,GAAyE,WAFtE;AAGR/G,UAAI,EAAE;AACFmO,gBAAQ,EAAE5J,SAAS,CAACsC,SAAV,MAAyB;AADjC;AAHE,KAAZ,EAMGhC,IANH,CAMQ,UAAAqH,QAAQ,EAAI;AAChB,aAAO,MAAI,CAAC4B,2BAAL,CAAiC5B,QAAjC,CAAP;AACH,KARD,EAQG6B,KARH,CAQS;AAAA,aAAM,MAAI,CAACH,YAAL,EAAN;AAAA,KART;AASH,G;;SAEDrF,yB,sCAA0BhE,S,EAAW6J,G,EAAY;AAAA,QAAZA,GAAY;AAAZA,SAAY,GAAN,IAAM;AAAA;;AAC7C;AAEA,QAAMxC,KAAK,GAAGyC,6DAAY,CAAC;AACvBtC,SAAG,EAAEtO,iDAAG,CAACuO,KAAJ,CAAUC,SAAV,CAAoB,QAApB,IAAgC,mBAAhC,IAAuDmC,GAAG,GAAG,EAAH,GAAQ,IAAlE,IAA0E,YAA1E,GAAyF7J,SAAS,CAACwC,EAAV,EADvE;AAEvBuH,gBAAU,EAAE7Q,iDAAG,CAACuO,KAAJ,CAAUC,SAAV,CAAoB,QAApB,IAAgC;AAFrB,KAAD,CAA1B;AAKAL,SAAK,CAAC/G,IAAN,CAAW,YAAM;AACbkB,YAAM,CAACxG,QAAP,CAAgBC,MAAhB;AACH,KAFD,EAEGuO,KAFH,CAES,YAAM;AACXQ,WAAK,CAAC9Q,iDAAG,CAACiB,UAAJ,CAAeC,KAAf,CAAqB,4DAArB,CAAD,CAAL;AACH,KAJD;AAKH,G;;SAED8J,2B,wCAA4BlE,S,EAAW;AACnC,SAAKgE,yBAAL,CAA+BhE,SAA/B,EAA0C,KAA1C;AACH,G;AAED;;;;;;SAIAyD,e,4BAAgBzD,S,EAAW;AAAA;;AACvB,SAAKrF,OAAL,CAAa,IAAb;AAEAzB,qDAAG,CAACoO,OAAJ,CAAY;AACRE,SAAG,EAAEtO,iDAAG,CAACuO,KAAJ,CAAUC,SAAV,CAAoB,QAApB,IAAgC,qBAAhC,GAAwD1H,SAAS,CAACwC,EAAV,EADrD;AAER8G,aAAO,EAAE,CAFD;AAGR/B,YAAM,EAAE;AAHA,KAAZ,EAIGjH,IAJH,CAIQ,UAAAqH,QAAQ,EAAI;AAChB,aAAO,MAAI,CAAC4B,2BAAL,CAAiC5B,QAAjC,CAAP;AACH,KAND,EAMG6B,KANH,CAMS;AAAA,aAAM,MAAI,CAACH,YAAL,EAAN;AAAA,KANT;AAOH,G;AAED;;;;;;SAIAY,e,4BAAgBjK,S,EAAW;AAAA;;AACvB,SAAKrF,OAAL,CAAa,IAAb;AAEA,QAAMuH,OAAO,GAAGlC,SAAS,CAACkC,OAAV,EAAhB;AAEAhJ,qDAAG,CAACoO,OAAJ,CAAY;AACRE,SAAG,EAAEtO,iDAAG,CAACuO,KAAJ,CAAUC,SAAV,CAAoB,QAApB,IAAgC,qBAAhC,GAAwD1H,SAAS,CAACwC,EAAV,EAAxD,GAAyE,SADtE;AAER+E,YAAM,EAAE,OAFA;AAGR9L,UAAI,EAAE;AAACyG,eAAO,EAAE,CAACA;AAAX;AAHE,KAAZ,EAIG5B,IAJH,CAIQ,UAAAqH,QAAQ,EAAI;AAChB,aAAO,MAAI,CAAC4B,2BAAL,CAAiC5B,QAAjC,CAAP;AACH,KAND,EAMG6B,KANH,CAMS;AAAA,aAAM,MAAI,CAACH,YAAL,EAAN;AAAA,KANT;AAOH,G;AAED;;;;;;SAIA1F,gB,6BAAiB3D,S,EAAW;AACxB,WAAO,KAAKiK,eAAL,CAAqBjK,SAArB,CAAP;AACH,G;AAED;;;;;;SAIAwD,e,4BAAgBxD,S,EAAW;AACvB,WAAO,KAAKiK,eAAL,CAAqBjK,SAArB,CAAP;AACH,G;AAED;;;;;;;SAKAkK,iB,8BAAkBlK,S,EAAW;AACzB,WAAO,KAAKT,UAAL,GAAkB4K,SAAlB,CAA4B,UAAAC,GAAG;AAAA,aAAIA,GAAG,CAAC5H,EAAJ,MAAYxC,SAAS,CAACwC,EAAV,EAAhB;AAAA,KAA/B,CAAP;AACH,G;AAED;;;;;;;;SAMA+G,2B,wCAA4B5B,Q,EAAU;AAClC,SAAKhN,OAAL,CAAa,KAAb;AAEA,QAAIqF,SAAS,GAAG9G,iDAAG,CAAC6H,KAAJ,CAAUsJ,UAAV,CAAqB1C,QAAQ,CAAClM,IAA9B,CAAhB;AACA,SAAK8D,UAAL,GAAkB,KAAK2K,iBAAL,CAAuBlK,SAAvB,CAAlB,IAAuDA,SAAvD;AAEAxG,KAAC,CAACiH,MAAF;AAEA,WAAOT,SAAP;AACH,G;;;;;;;;;;;;;;;;;AC1LL;AAAA;AAAA;AAAA;AAAA;;IAEqBhE,mB;;;AACjB,+BAAYrB,OAAZ,EAAqB;AACjB,SAAK0L,KAAL,GAAa7M,CAAC,CAACqC,IAAF,CAAO,EAAP,CAAb;AACA,SAAKyO,WAAL,GAAmB,IAAnB;AACA,SAAK3P,OAAL,GAAeA,OAAf;AACA,SAAK+O,eAAL;AACH;;;;SAEDzD,Y,2BAAe;AAAA;;AACX,QAAI,KAAKtL,OAAL,MAAkB,CAAC,KAAK2P,WAA5B,EAAyC;AACrC;AACH;;AAED,SAAK3P,OAAL,CAAa,IAAb;AAEAzB,qDAAG,CAACoO,OAAJ,CAAY;AACRC,YAAM,EAAE,KADA;AAERC,SAAG,EAAE,KAAK8C;AAFF,KAAZ,EAGGhK,IAHH,CAGQ,UAAAiK,MAAM,EAAI;AACd,UAAMC,QAAQ,GAAGD,MAAM,CAAC9O,IAAP,CAAYsE,GAAZ,CAAgB,UAAAtE,IAAI;AAAA,eAAIvC,iDAAG,CAAC6H,KAAJ,CAAU0J,YAAV,CAAuB,cAAvB,EAAuChP,IAAvC,CAAJ;AAAA,OAApB,CAAjB;;AACA,WAAI,CAAC4K,KAAL,CAAWmE,QAAX;;AACA,WAAI,CAACF,WAAL,GAAmB,IAAnB;;AACA,WAAI,CAAC3P,OAAL,CAAa,KAAb;;AAEAnB,OAAC,CAACiH,MAAF;AACH,KAVD;AAWH,G;;SAEDiJ,e,8BAAkB;AACd,SAAK/O,OAAL,CAAa,KAAb;AACA,SAAK2P,WAAL,GAAmBpR,iDAAG,CAACuO,KAAJ,CAAUC,SAAV,CAAoB,QAApB,IAAgC,eAAnD;AACA,SAAKrB,KAAL,CAAW,EAAX;AACH,G;;;;;;;;;;;;;;;;;AClCL;AAAA;;;;;;;;;;AAUe,yEAAUqE,IAAV,EAAgBC,IAAhB,EAAsBC,SAAtB,EAAiC;AAC5C,MAAItB,OAAJ;AACA,SAAO,YAAY;AACf,QAAIuB,OAAO,GAAG,IAAd;AAAA,QAAoBC,IAAI,GAAGC,SAA3B;;AACA,QAAIC,KAAK,GAAG,SAARA,KAAQ,GAAY;AACpB1B,aAAO,GAAG,IAAV;AACA,UAAI,CAACsB,SAAL,EAAgBF,IAAI,CAACzJ,KAAL,CAAW4J,OAAX,EAAoBC,IAApB;AACnB,KAHD;;AAIA,QAAIG,OAAO,GAAGL,SAAS,IAAI,CAACtB,OAA5B;AACA4B,gBAAY,CAAC5B,OAAD,CAAZ;AACAA,WAAO,GAAG6B,UAAU,CAACH,KAAD,EAAQL,IAAR,CAApB;AACA,QAAIM,OAAJ,EAAaP,IAAI,CAACzJ,KAAL,CAAW4J,OAAX,EAAoBC,IAApB;AAChB,GAVD;AAWH;AAAA,C;;;;;;;;;;;;ACvBD;AAAe,yEAASpP,QAAT,EACf;AAAA,MADwBA,QACxB;AADwBA,YACxB,GADmC,EACnC;AAAA;;AACI,MAAM8L,GAAG,GAAG9L,QAAQ,CAAC8L,GAAT,IAAgB,GAA5B;AACA,MAAMuC,UAAU,GAAGrO,QAAQ,CAACqO,UAAT,IAAuB,IAA1C;AACA,MAAMqB,KAAK,GAAG1P,QAAQ,CAAC0P,KAAT,IAAkB,GAAhC;AACA,MAAMC,MAAM,GAAG3P,QAAQ,CAAC2P,MAAT,IAAmB,GAAlC;AACA,MAAMC,OAAO,GAAG7J,CAAC,CAACD,MAAD,CAAjB,CALJ,CAOI;;AACA,MAAM+J,QAAQ,GAAG/R,CAAC,CAAC+R,QAAF,EAAjB;AAEA,MAAMlE,KAAK,GAAG7F,MAAM,CAACyB,IAAP,CAAYuE,GAAZ,EAAiB,aAAjB,EACV,WAAS4D,KAAT,sBACUC,MADV,qBAEOC,OAAO,CAACD,MAAR,KAAmB,CAAnB,GAAuBA,MAAM,GAAG,CAFvC,uBAGQC,OAAO,CAACF,KAAR,KAAkB,CAAlB,GAAsBA,KAAK,GAAG,CAHtC,WAIA,sCALU,CAAd;AAOA,MAAMI,QAAQ,GAAGhK,MAAM,CAACiK,WAAP,CAAmB,YAAM;AACtC,QAAI;AACA,UAAIpE,KAAK,CAACqE,MAAV,EAAkB;AACdlK,cAAM,CAACmK,aAAP,CAAqBH,QAArB;AACAD,gBAAQ,CAACK,MAAT;AACH,OAHD,MAGO,IAAIvE,KAAK,CAACwE,QAAN,CAAeC,GAAf,KAAuB/B,UAA3B,EAAuC;AAC1CvI,cAAM,CAACmK,aAAP,CAAqBH,QAArB;AACAnE,aAAK,CAACQ,KAAN;AACA0D,gBAAQ,CAACQ,OAAT;AACH;AACJ,KATD,CASE,OAAOC,CAAP,EAAU,CACR;AACH;AACJ,GAbgB,EAad,GAbc,CAAjB;AAeA,SAAOT,QAAQ,CAACU,OAAhB;AACH,C;;;;;;;;;;;AClCD,iD;;;;;;;;;;;ACAA,6C;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,kE;;;;;;;;;;;ACAA,2D;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,2D;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,8D;;;;;;;;;;;ACAA,gE;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,0D","file":"admin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./admin.js\");\n","export * from './src/admin';","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import {extend} from 'flarum/extend';\nimport app from 'flarum/app';\nimport AdminNav from 'flarum/components/AdminNav';\nimport AdminLinkButton from 'flarum/components/AdminLinkButton';\nimport BazaarPage from './components/BazaarPage';\n\nexport default function () {\n    // create the route\n    app.routes['flagrow-bazaar'] = {path: '/flagrow/bazaar', component: BazaarPage.component()};\n    // settings toggle on native extensions page\n    app.extensionSettings['flagrow-bazaar'] = () => m.route(app.route('flagrow-bazaar'));\n    // Add tab to admin menu\n    extend(AdminNav.prototype, 'items', items => {\n        items.add('flagrow-bazaar', AdminLinkButton.component({\n            href: app.route('flagrow-bazaar'),\n            icon: 'fas fa-shopping-bag',\n            children: app.translator.trans('flagrow-bazaar.admin.nav.title'),\n            description: app.translator.trans('flagrow-bazaar.admin.nav.description')\n        }));\n    });\n}\n","import {extend} from 'flarum/extend';\nimport app from 'flarum/app';\nimport TasksPage from './components/TasksPage';\n\nexport default function () {\n    app.routes['flagrow-bazaar-tasks'] = {path: '/flagrow/bazaar/tasks', component: TasksPage.component()};\n}\n","import Component from 'flarum/Component';\nimport icon from \"flarum/helpers/icon\";\nimport Button from 'flarum/components/Button';\nimport LinkButton from 'flarum/components/LinkButton';\n\nexport default class BazaarLoader extends Component {\n\n    view() {\n        const error = this.props.loading() === 'error';\n\n        return m('div', {\n            className: 'Bazaar--Loader ' + (error ? 'Error' : null),\n            hidden: this.props.loading() === false\n        }, [\n            m('.Loader-modal', [\n                m('.Loader-icon', icon(error ? 'fas fa-exclamation-triangle' : 'fas fa-shopping-bag')),\n                m('div', [\n                    m('p', app.translator.trans(error ? 'flagrow-bazaar.admin.loader.error' : 'flagrow-bazaar.admin.loader.is_loading')),\n                    error ? [\n                        Button.component({\n                            className: 'Button Button--block',\n                            icon: 'fas fa-sync',\n                            onclick: () => location.reload(),\n                            children: app.translator.trans('flagrow-bazaar.admin.loader.refresh')\n                        }),\n                        Button.component({\n                            className: 'Button Button--block',\n                            icon: 'fas fa-times',\n                            onclick: () => this.props.loading(false),\n                            children: app.translator.trans('flagrow-bazaar.admin.loader.close')\n                        }),\n                        LinkButton.component({\n                            className: 'Button Button--block',\n                            icon: 'fas fa-bug',\n                            href: 'https://github.com/flagrow/bazaar/issues',\n                            target: '_blank',\n                            config: {}, // Disable internal Mithril routing\n                            children: app.translator.trans('flagrow-bazaar.admin.loader.report_issue')\n                        }),\n                    ] : null\n                ])\n            ])\n        ])\n    }\n}\n","import Component from \"flarum/Component\";\nimport ExtensionRepository from \"../utils/ExtensionRepository\";\nimport ExtensionList from \"./ExtensionList\";\nimport ExtensionSearch from \"./ExtensionSearch\";\nimport BazaarPageHeader from './BazaarPageHeader';\n\nexport default class BazaarPage extends Component {\n    init() {\n        app.current = this;\n\n        this.authorized = (app.data.settings['flagrow.bazaar.api_token'] || '').length > 0;\n        this.connected = app.data.settings['flagrow.bazaar.connected'] && app.data.settings['flagrow.bazaar.connected'] !== '0';\n        this.loading = m.prop(true);\n\n        this.params = this.params();\n\n        this.repository = new ExtensionRepository(this.loading);\n\n        this.extensionList = new ExtensionList({\n            params: this.params,\n            loading: this.loading,\n            repository: this.repository,\n            connected: this.connected,\n            authorized: this.authorized\n        });\n\n        this.search = ExtensionSearch.component({params: this.params, onsubmit: this.updateResults.bind(this)});\n    }\n\n    updateResults(params) {\n        this.params = params;\n\n        this.extensionList.update(params);\n    }\n\n    view() {\n        return m('div', {className: 'Bazaar Extensions'}, [\n            BazaarPageHeader.component({\n                connected: this.connected\n            }),\n            m('div', {className: 'ExtensionsPage-list'}, [\n                m('div', {className: 'container'}, [\n                    this.search,\n                    this.extensionList.render()\n                ])\n            ]),\n        ]);\n    }\n\n    /**\n     * Get URL parameters that stick between filter changes.\n     *\n     * @return {Object}\n     */\n    stickyParams() {\n        return {\n            sort: m.route.param('sort'),\n            q: m.route.param('q')\n        };\n    }\n\n\n    /**\n     * Get parameters to pass to the DiscussionList component.\n     *\n     * @return {Object}\n     */\n    params() {\n        const params = this.stickyParams();\n\n        params.filter = m.route.param('filter');\n\n        return params;\n    }\n}\n","import app from 'flarum/app';\nimport Component from 'flarum/Component';\nimport LinkButton from 'flarum/components/LinkButton';\nimport Button from 'flarum/components/Button';\nimport FilePermissionsModal from '../modals/FilePermissionsModal';\nimport MemoryLimitModal from '../modals/MemoryLimitModal';\nimport BazaarConnectModal from '../modals/BazaarConnectModal';\nimport BazaarSettingsModal from '../modals/BazaarSettingsModal';\nimport DashboardModal from '../modals/DashboardModal';\n\nexport default class BazaarPageHeader extends Component {\n    view() {\n        return (\n            <div className=\"ExtensionsPage-header\">\n                <div className=\"container\">\n                    {this.header()}\n                </div>\n            </div>\n        );\n    }\n\n    header() {\n        let buttons = [].concat(\n          this.pagesButtons(),\n          this.settingsButton(),\n          this.requirementsButtons(),\n          this.connectedButtons(),\n        );\n\n        return m('div', {className: 'ButtonGroup'}, buttons);\n    }\n\n    settingsButton() {\n      return [\n        Button.component({\n          className: 'Button Button--icon',\n          icon: 'fas fa-cog',\n          onclick: () => app.modal.show(new BazaarSettingsModal)\n        })\n      ];\n    }\n    /**\n     * Loads a list of buttons that give insight in the state of this installation.\n     * @returns {Array}\n     */\n    requirementsButtons() {\n        let memory_limit_met = app.data.settings['flagrow.bazaar.php.memory_limit-met'] || false;\n        let memory_limit = app.data.settings['flagrow.bazaar.php.memory_limit'];\n        let memory_requested = app.data.settings['flagrow.bazaar.php.memory_requested'];\n        let file_permissions = app.data.settings['flagrow.bazaar.file-permissions'] || [];\n\n        let components = [];\n\n        if (!memory_limit_met) {\n            components.push(\n                Button.component({\n                    className: 'Button Button--icon Requirement-MemoryLimit',\n                    icon: 'fas fa-signal',\n                    onclick: () => app.modal.show(new MemoryLimitModal({memory_requested, memory_limit}))\n                })\n            );\n        }\n\n        if (file_permissions.length > 0) {\n            components.push(Button.component({\n                className: 'Button Button--icon Requirement-FilePermissions',\n                icon: 'fas fa-hdd',\n                onclick: () => app.modal.show(new FilePermissionsModal({file_permissions}))\n            }));\n        }\n\n        return components;\n    }\n\n    connectedButtons() {\n        let connected = this.props.connected;\n        let flagrowHost = app.data.settings['flagrow.bazaar.flagrow-host'] || 'https://flagrow.io';\n\n        if (connected) {\n            return [\n                Button.component({\n                    className: 'Button Button--icon Connected',\n                    icon: 'fas fa-plug',\n                    onclick: () => app.modal.show(new DashboardModal({\n                        flagrowHost\n                    }))\n                }),\n            ]\n        }\n\n        return [\n            Button.component({\n                className: 'Button Button--icon Connect',\n                icon: 'fas fa-plug',\n                onclick: () => app.modal.show(new BazaarConnectModal({flagrowHost}))\n            }),\n        ]\n    }\n\n    pagesButtons() {\n        // Sometimes no route has been set as the current one\n        if (typeof app.current === 'undefined') {\n            return null;\n        }\n\n        const routeName = app.current.props.routeName;\n        let links = [];\n\n        links.push(LinkButton.component({\n            className: 'Button Button--icon',\n            icon: 'fas fa-shopping-bag',\n            href: app.route('flagrow-bazaar'),\n            title: app.translator.trans('flagrow-bazaar.admin.header.extensions'),\n            active: routeName === 'flagrow-bazaar'\n        }));\n\n        links.push(LinkButton.component({\n            className: 'Button Button--icon',\n            icon: 'fas fa-history',\n            href: app.route('flagrow-bazaar-tasks'),\n            title: app.translator.trans('flagrow-bazaar.admin.header.tasks'),\n            active: routeName === 'flagrow-bazaar-tasks'\n        }));\n\n        return links;\n    }\n}\n","import Button from \"flarum/components/Button\";\nimport icon from 'flarum/helpers/icon';\nimport extract from 'flarum/utils/extract';\nimport extractText from 'flarum/utils/extractText';\n\nexport default class CustomCheckbox extends Button {\n    view() {\n        const attrs = Object.assign({}, this.props);\n\n        delete attrs.state;\n        delete attrs.children;\n\n        attrs.className = attrs.className || '';\n        attrs.type = attrs.type || 'button';\n\n        if (this.props.state) attrs.className += ' active';\n\n        // If nothing else is provided, we use the textual button content as tooltip\n        if (!attrs.title && this.props.children) {\n            attrs.title = extractText(this.props.children);\n        }\n\n        const iconName = extract(attrs, 'icon');\n        if (iconName) attrs.className += ' hasIcon';\n\n        const loading = extract(attrs, 'loading');\n        if (attrs.disabled || loading) {\n            attrs.className += ' disabled' + (loading ? ' loading' : '');\n            delete attrs.onclick;\n        }\n\n        return (\n            <button {...attrs}\n                onclick={this.onchange.bind(this)}\n                >\n                {this.getButtonContent()}\n            </button>\n        );\n    }\n\n    /**\n     * Run a callback when the state of the checkbox is changed.\n     *\n     * @param {Boolean} checked\n     * @protected\n     */\n    onchange() {\n        if (this.props.onchange) this.props.onchange(! this.props.state, this);\n    }\n}\n","import Component from 'flarum/Component';\nimport Button from 'flarum/components/Button';\nimport ExtensionListItem from './ExtensionListItem';\nimport BazaarLoader from \"./BazaarLoader\";\nimport Placeholder from 'flarum/components/Placeholder';\n\nexport default class ExtensionList extends Component {\n    init() {\n        /**\n         * Whether or not discussion results are loading.\n         *\n         * @type {Boolean}\n         */\n        this.loading = this.props.loading;\n\n        /**\n         * Whether or not there are more results that can be loaded.\n         *\n         * @type {Boolean}\n         */\n        this.moreResults = false;\n        this.resultMeta = {};\n\n        // this.repository = new ExtensionRepository(this.loading);\n\n        /**\n         * The discussions in the discussion list.\n         *\n         * @type {Extension[]}\n         */\n        this.extensions = [];\n\n        this.refresh();\n    }\n\n\n\n    view() {\n        let loading;\n\n        if (this.loading()) {\n            loading = BazaarLoader.component({loading: this.loading});\n        } else if (this.moreResults) {\n            loading = [\n                Button.component({\n                    children: app.translator.trans('flagrow-bazaar.admin.page.button.more', {current: this.resultMeta.pages_current + 1, total: this.resultMeta.pages_total}),\n                    className: 'Button Button--primary',\n                    onclick: this.loadMore.bind(this)\n                })\n            ];\n        }\n\n        if (this.extensions.length === 0 && !this.loading) {\n            let text = app.translator.trans('flagrow-bazaar.admin.page.state.no_results_available');\n\n            if (! this.props.authorized) {\n                text = app.translator.trans('flagrow-bazaar.admin.page.state.not_authorized');\n            }\n\n            return (\n                <div className=\"DiscussionList\">\n                    {Placeholder.component({text})}\n                </div>\n            );\n        }\n\n        return (\n            <div className=\"ExtensionList-wrapper\">\n                <div className=\"ExtensionList\">\n                    {this.extensions.map(extension => {\n                        return ExtensionListItem.component({\n                                extension: extension,\n                                repository: this.props.repository,\n                                connected: this.props.connected,\n                                key: extension.package(),\n                            });\n                    })}\n                </div>\n                <div className=\"ExtensionList-loadMore\">\n                    {loading}\n                </div>\n            </div>\n        );\n    }\n\n    update(params) {\n        this.props.params = params;\n\n        this.refresh();\n    }\n\n    /**\n     * Clear and reload the discussion list.\n     *\n     * @public\n     */\n    refresh(clear = true) {\n        if (clear) {\n            this.loading(true);\n            this.extensions = [];\n        }\n\n        return this.loadResults().then(\n            results => {\n                this.extensions = [];\n                this.parseResults(results);\n            },\n            () => {\n                this.loading(false);\n                m.redraw();\n            }\n        );\n    }\n\n    /**\n     * Load a new page of discussion results.\n     *\n     * @param {Integer} offset The index to start the page at.\n     * @return {Promise}\n     */\n    loadResults(offset) {\n        const params = this.requestParams();\n        params.page = {offset};\n        params.include = params.include.join(',');\n\n        return app.store.find('bazaar-extensions', params);\n    }\n\n    /**\n     * Parse results and append them to the discussion list.\n     *\n     * @param {Extension[]} results\n     * @return {Extension[]}\n     */\n    parseResults(results) {\n        [].push.apply(this.extensions, results);\n\n        this.loading(false);\n        this.moreResults = !!results.payload.links.next;\n        this.resultMeta = results.payload.meta || {};\n\n        m.lazyRedraw();\n\n        return results;\n    }\n\n    /**\n     * Load the next page of discussion results.\n     *\n     * @public\n     */\n    loadMore() {\n        this.loading(true);\n\n        this.loadResults(this.extensions.length)\n            .then(this.parseResults.bind(this));\n    }\n\n    /**\n     * Get the parameters that should be passed in the API request to get\n     * discussion results.\n     *\n     * @return {Object}\n     * @api\n     */\n    requestParams() {\n        const params = this.props.params;\n        const out = {include: [], filter: {}};\n\n        out.sort = this.sortMap()[params.sort];\n\n        if (params.q) {\n            out.filter.q = params.q;\n        }\n\n        if (params.filter) {\n            out.filter = window.$.param(params.filter);\n        }\n\n        return out;\n    }\n\n    /**\n     * Get a map of sort keys (which appear in the URL, and are used for\n     * translation) to the API sort value that they represent.\n     *\n     * @return {Object}\n     */\n    sortMap() {\n        const map = {};\n\n        if (this.props.params.q) {\n            map.relevance = '';\n        }\n\n        return map;\n    }\n}\n","import Component from \"flarum/Component\";\nimport icon from \"flarum/helpers/icon\";\nimport ItemList from \"flarum/utils/ItemList\";\nimport Button from \"flarum/components/Button\";\nimport Dropdown from \"flarum/components/Dropdown\";\nimport Badge from 'flarum/components/Badge';\n\nexport default class ExtensionListItem extends Component {\n    config(isInitialized) {\n        if (isInitialized) return;\n\n        // Be careful to always use a `key` with this component or this mis-align the tooltips if items are added or removed\n        if (this.props.extension.description()) this.$('.ExtensionIcon').tooltip({container: 'body'});\n    }\n\n    view() {\n        const extension = this.props.extension;\n        const connected = this.props.connected || false;\n        const controls = this.controlItems(extension, connected).toArray();\n        const badges = this.badges(extension).toArray();\n        const repository = this.props.repository;\n\n        return <div className={\n            'Extension ' +\n            (extension.enabled() ? 'enabled ' : 'disabled ') +\n            (extension.installed() ? 'installed ' : 'uninstalled ') +\n            (extension.outdated() ? 'outdated ' : '') +\n            (extension.pending() ? 'pending ' : '') +\n            (controls.length > 0 ? 'hasControls' : '') +\n            (extension.favorited() ? 'favorited' : '') +\n            (extension.flarumCompatibilityCurrent() ? ' compatible' : 'incompatible')\n        } key={extension.id()} data-id={extension.id()}>\n            <span className=\"Extension-icon\" style={extension.icon() || ''} title={extension.description()}>\n              {extension.icon() ? icon('fas fa-' + extension.icon().name) : ''}\n            </span>\n            <div className=\"Extension-meta\">\n                <ul className=\"ExtensionListItem-badges badges\">\n                    {badges}\n                </ul>\n                <label className=\"Meta-Title\">\n                    {extension.title() || extension.package()}\n                </label>\n\n                <div className=\"Meta-Item description\">\n                    {extension.description()}\n                </div>\n\n                <div className=\"Meta-Item vendor\">\n                    <div className=\"label\"><i className=\"fas fa-user\"></i> {app.translator.trans('flagrow-bazaar.admin.page.extension.vendor')}</div>\n                    <div className=\"value\">{extension.package().split('/')[0]}</div>\n                </div>\n                <div className=\"Meta-Item downloads\">\n                    <div className=\"label\"><i class=\"fas fa-download\"></i> {app.translator.trans('flagrow-bazaar.admin.page.extension.downloads')}</div>\n                    <div className=\"value\">{extension.downloads()}</div>\n                </div>\n                <div className=\"Meta-Item favorites\">\n                    <div className=\"label\"><i className=\"fas fa-heart\"></i> {app.translator.trans('flagrow-bazaar.admin.page.extension.favorites')}</div>\n                    <div className=\"value\">{extension.favorites()}</div>\n                </div>\n                {extension.installed_version() ? (\n                    <div className=\"Meta-Item version\">\n                        <div className=\"label\">{app.translator.trans('flagrow-bazaar.admin.page.extension.installed_version')}</div>\n                        <div className=\"value\">{extension.installed_version()}</div>\n                    </div>\n                ) : ''}\n                <div className=\"Meta-Item version\">\n                    <div className=\"label\">{app.translator.trans('flagrow-bazaar.admin.page.extension.highest_version')}</div>\n                    <div className=\"value\">{extension.highest_version()}</div>\n                </div>\n                <div className=\"Extension-controls\">\n                    {connected ? (\n                        <Button\n                            className=\"Button Button--icon Button--flat favorite\"\n                            icon={(extension.favorited() ? 'fas' : 'far') + ' fa-heart'}\n                            onclick={() => repository.favoriteExtension(extension)}>\n                        </Button>\n                    ) : ''}\n                    {extension.discuss_link() ? (\n                        <Button\n                            className=\"Button Button--icon Button--flat\"\n                            icon=\"fas fa-comments\"\n                            onclick={() => window.open(extension.discuss_link())}>\n                        </Button>\n                    ) : ''}\n                    {extension.landing_link() ? (\n                        <Button\n                            className=\"Button Button--icon Button--flat\"\n                            icon=\"fas fa-chart-line\"\n                            onclick={() => window.open(extension.landing_link())}>\n                        </Button>\n                    ) : ''}\n                    {controls.length > 0 ? (\n                        <Dropdown\n                            buttonClassName=\"Button Button--icon Button--flat\"\n                            menuClassName=\"Dropdown-menu--right\"\n                            icon=\"fas fa-ellipsis-h\">\n                            {controls}\n                        </Dropdown>\n                    ) : ''}\n                </div>\n            </div>\n        </div>;\n    }\n\n    controlItems(extension, connected) {\n        const items = new ItemList();\n        const repository = this.props.repository;\n\n        const favoriteTrans = extension.favorited() ? 'flagrow-bazaar.admin.page.button.remove_favorite_button' : 'flagrow-bazaar.admin.page.button.favorite_button';\n\n        if (connected) {\n            items.add('favorite', Button.component({\n                icon: 'fas fa-heart',\n                children: app.translator.trans(favoriteTrans),\n                onclick: () => {\n                    repository.favoriteExtension(extension);\n                }\n            }));\n        }\n\n        if (! extension.pending()) {\n            if (extension.enabled() && app.extensionSettings[name]) {\n                items.add('settings', Button.component({\n                    icon: 'fas fa-cog',\n                    children: app.translator.trans('core.admin.extensions.settings_button'),\n                    onclick: app.extensionSettings[name]\n                }));\n            }\n\n            if (extension.can_uninstall()) {\n                items.add('uninstall', Button.component({\n                    icon: 'fas fa-minus-square',\n                    children: app.translator.trans('flagrow-bazaar.admin.page.button.uninstall'),\n                    onclick: () => {\n                        this.props.extension = repository.uninstallExtension(extension);\n                    }\n                }));\n            }\n\n            if (extension.can_enable()) {\n                items.add('enable', Button.component({\n                    icon: 'fas fa-check-square',\n                    children: app.translator.trans('flagrow-bazaar.admin.page.button.enable'),\n                    onclick: () => {\n                        repository.enableExtension(extension);\n                    }\n                }));\n            }\n\n            if (extension.installed() && extension.outdated()) {\n                items.add('update', Button.component({\n                    icon: 'fas fa-level-up',\n                    children: app.translator.trans('flagrow-bazaar.admin.page.button.update'),\n                    onclick: () => {\n                        this.props.extension = repository.updateExtension(extension);\n                    }\n                }));\n            }\n\n            if (extension.can_disable()) {\n                items.add('disable', Button.component({\n                    icon: 'fas fa-square',\n                    children: app.translator.trans('flagrow-bazaar.admin.page.button.disable'),\n                    onclick: () => {\n                        this.props.extension = repository.disableExtension(extension);\n                    }\n                }));\n            }\n\n            if (extension.can_install()) {\n                items.add('install', Button.component({\n                    icon: 'fas fa-plus-square',\n                    children: app.translator.trans('flagrow-bazaar.admin.page.button.install'),\n                    onclick: () => {\n                        this.props.extension = repository.installExtension(extension);\n                    }\n                }));\n            }\n        }\n\n        if (extension.premium() && !connected) {\n            items.add('subscribe', Button.component({\n                disabled: true,\n                icon: 'fas fa-shopping-cart',\n                children: app.translator.trans('flagrow-bazaar.admin.page.button.connect_to_subscribe'),\n            }));\n        }\n\n        if (extension.canCheckout() && connected) {\n            items.add('subscribe', Button.component({\n                icon: 'fas fa-shopping-cart',\n                children: app.translator.trans('flagrow-bazaar.admin.page.button.subscribe'),\n                onclick: () => {\n                    repository.premiumExtensionSubscribe(extension);\n                }\n            }));\n        }\n\n        if (extension.canSafelyUnsubscribe() && connected) {\n            items.add('unsubscribe', Button.component({\n                icon: 'fas fa-ban',\n                children: app.translator.trans('flagrow-bazaar.admin.page.button.unsubscribe'),\n                onclick: () => {\n                    repository.premiumExtensionUnsubscribe(extension);\n                }\n            }));\n        }\n\n        return items;\n    }\n\n    /**\n     * Get the Badge components that apply to this discussion.\n     *\n     * @return {ItemList}\n     * @public\n     */\n    badges(extension) {\n        const items = new ItemList();\n\n        if (!extension.flarumCompatibilityNext()) {\n            items.add('nextIncompatible', <Badge icon=\"fas fa-exclamation\"\n                   type=\"nextIncompatible\"\n                   label={app.translator.trans('flagrow-bazaar.admin.page.extension.next_incompatible')} />)\n        }\n        if (!extension.flarumCompatibilityLatest()) {\n            items.add('latestIncompatible', <Badge icon=\"fas fa-exclamation-circle\"\n                 type=\"latestIncompatible\"\n                 label={app.translator.trans('flagrow-bazaar.admin.page.extension.latest_incompatible')} />)\n        }\n        if (!extension.flarumCompatibilityCurrent()) {\n            items.add('incompatible', <Badge icon=\"fas fa-exclamation-triangle\"\n                 type=\"incompatible\"\n                 label={app.translator.trans('flagrow-bazaar.admin.page.extension.incompatible')} />)\n        }\n        if (extension.subscribed()) {\n            items.add('subscribed', <Badge icon=\"fas fa-shopping-cart\"\n                type=\"subscribed\"\n                label={app.translator.trans('flagrow-bazaar.admin.page.extension.subscribed')} />);\n        } else if (extension.premium()) {\n            items.add('premium', <Badge icon=\"fas fa-certificate\"\n                type=\"premium\"\n                label={app.translator.trans('flagrow-bazaar.admin.page.extension.premium')} />);\n        }\n        if (extension.pending()) {\n            items.add('pending', <Badge icon=\"fas fa-circle-notch fa-spin\"\n                type=\"pending\"\n                label={app.translator.trans('flagrow-bazaar.admin.page.extension.pending')} />);\n        }\n        if (extension.installed() && extension.outdated()) {\n            items.add('outdated', <Badge icon=\"fas fa-sort-numeric-down\"\n                type=\"outdated\"\n                label={app.translator.trans('flagrow-bazaar.admin.page.extension.outdated', {new: extension.highest_version() })} />)\n        }\n        if (extension.favorited()) {\n            items.add('favorited', <Badge icon=\"fas fa-heart\"\n                type=\"favorited\"\n                label={app.translator.trans('flagrow-bazaar.admin.page.extension.favorited')} />)\n        }\n        if (extension.installed() && !extension.enabled()) {\n            items.add('installed', <Badge icon=\"fas fa-plus-square\"\n                type=\"installed\"\n                label={app.translator.trans('flagrow-bazaar.admin.page.extension.installed')} />)\n        }\n        if (extension.enabled()) {\n            items.add('enabled', <Badge icon=\"fas fa-check-square\"\n                type=\"enabled\"\n                label={app.translator.trans('flagrow-bazaar.admin.page.extension.enabled')} />)\n        }\n\n        return items;\n    }\n}\n","import Component from \"flarum/Component\";\nimport CustomCheckbox from \"./CustomCheckbox\";\nimport debounce from \"../utils/debounce\";\n\nexport default class ExtensionSearch extends Component {\n    init() {\n        this.updateDebounce = debounce(() => {\n            if (this.props.onsubmit) this.props.onsubmit(this.props.params);\n        }, 500);\n    }\n\n    view() {\n        return m('div', [\n            m('fieldset', {className: 'ExtensionSearch'},\n                m('input[type=text].FormControl', {\n                    value: this.props.params.q || '',\n                    oninput: m.withAttr('value', term => this.search(term)),\n                    placeholder: app.translator.trans('flagrow-bazaar.admin.search.placeholder'),\n                })\n            ),\n            m('div', {className: 'ExtensionFilters ButtonGroup'}, [\n                CustomCheckbox.component({\n                    icon: 'fas fa-level-up',\n                    className: 'Button hasIcon',\n                    state: this.isToggled('update'),\n                    onchange: (checked) => this.toggleFilter('update', checked),\n                    children: app.translator.trans('flagrow-bazaar.admin.search.filter_update')\n                }),\n                CustomCheckbox.component({\n                    icon: 'fas fa-circle-notch',\n                    className: 'Button hasIcon',\n                    state: this.isToggled('pending'),\n                    onchange: (checked) => this.toggleFilter('pending', checked),\n                    children: app.translator.trans('flagrow-bazaar.admin.search.filter_pending')\n                }),\n                CustomCheckbox.component({\n                    icon: 'fas fa-plus-square',\n                    className: 'Button hasIcon',\n                    state: this.isToggled('installed'),\n                    onchange: (checked) => this.toggleFilter('installed', checked),\n                    children: app.translator.trans('flagrow-bazaar.admin.search.filter_installed')\n                }),\n                this.connected ? [\n                    CustomCheckbox.component({\n                        icon: 'fas fa-heart',\n                        className: 'Button hasIcon',\n                        state: this.isToggled('favorited'),\n                        onchange: (checked) => this.toggleFilter('favorited', checked),\n                        children: app.translator.trans('flagrow-bazaar.admin.search.filter_favorited')\n                    }),\n                    CustomCheckbox.component({\n                        icon: 'fas fa-shopping-cart',\n                        className: 'Button hasIcon',\n                        state: this.isToggled('subscribed'),\n                        onchange: (checked) => this.toggleFilter('subscribed', checked),\n                        children: app.translator.trans('flagrow-bazaar.admin.search.filter_subscribed')\n                    }),\n                ] : '',\n                CustomCheckbox.component({\n                    icon: 'fas fa-certificate',\n                    className: 'Button hasIcon',\n                    state: this.isToggled('premium'),\n                    onchange: (checked) => this.toggleFilter('premium', checked),\n                    children: app.translator.trans('flagrow-bazaar.admin.search.filter_premium')\n                }),\n            ])\n        ])\n    }\n\n    isToggled(name) {\n        const filter = this.props.params.filter || {};\n        const is = filter.is || [];\n\n        return is.indexOf(name) >= 0;\n    }\n\n    toggleFilter(name, checked) {\n        let filter = this.props.params.filter || {};\n        let is = filter.is || [];\n\n        const i = is.indexOf(name);\n\n        if (checked && i === -1) {\n            is.push(name);\n        } else if (!checked && i >= 0) {\n            is.splice(i, 1);\n        }\n\n        filter.is = is;\n\n        this.props.params.filter = filter;\n\n        this.updateDebounce();\n    }\n\n    search(term) {\n        this.props.params.q = term;\n\n        this.updateDebounce();\n    }\n}\n","import app from 'flarum/app';\nimport Component from \"flarum/Component\";\nimport icon from \"flarum/helpers/icon\";\nimport Button from \"flarum/components/Button\";\nimport humanTime from 'flarum/helpers/humanTime';\nimport fullTime from 'flarum/helpers/fullTime';\n\nexport default class TaskListItem extends Component {\n    init() {\n        this.extended = m.prop(false);\n    }\n\n    view() {\n        const task = this.props.task;\n        const iconName = (function() {\n            switch (task.status()) {\n                case 'success':\n                    return 'fas fa-check';\n                case 'exception':\n                    return 'fas fa-exclamation';\n                case 'working':\n                    return 'fas fa-spinner';\n            }\n            return 'fas fa-clock';\n        })();\n\n        // We need to wrap items in a tbody because Mithril 0.2 and therefore flarum/Component does not allow a list of vnodes to be returned from a view\n        // And we can't wrap <tr> in anything else without breaking the table\n        // Having multiple <tbody> does not seem to be too much an issue https://stackoverflow.com/a/3076790/3133038\n        return (\n            <tbody className={ 'TaskListItem status-' + task.status() }>\n                <tr>\n                    <td className=\"time-column\">{ humanTime(task.created_at()) }</td>\n                    <td className=\"status-column\" title={ app.translator.trans('flagrow-bazaar.admin.page.task.status.' + (task.status() !== null ? task.status() : 'unknown')) }><div className=\"status\">{ icon(iconName) }</div></td>\n                    <td className=\"command-column\">\n                        { app.translator.trans('flagrow-bazaar.admin.page.task.command.' + task.command(), {extension: (<strong>{ task.package() }</strong>)}) }\n                    </td>\n                    <td className=\"details-column\">\n                        { Button.component({\n                            icon: 'fas fa-plus',\n                            className: 'Button',\n                            onclick: () => { this.extended(!this.extended()); }\n                        }) }\n                    </td>\n                </tr>\n                { this.extended() ? (\n                    <tr>\n                        <td className=\"output-column\" colspan=\"4\">\n                            <dl>\n                                <dt>{ app.translator.trans('flagrow-bazaar.admin.page.task.attribute.created_at') }</dt>\n                                <dd>{ fullTime(task.created_at()) }</dd>\n                            </dl>\n                            <dl>\n                                <dt>{ app.translator.trans('flagrow-bazaar.admin.page.task.attribute.started_at') }</dt>\n                                <dd>{ fullTime(task.started_at()) }</dd>\n                            </dl>\n                            <dl>\n                                <dt>{ app.translator.trans('flagrow-bazaar.admin.page.task.attribute.finished_at') }</dt>\n                                <dd>{ fullTime(task.finished_at()) }</dd>\n                            </dl>\n                            <p>{ app.translator.trans('flagrow-bazaar.admin.page.task.header.output') }</p>\n                            <pre className=\"output\">{ task.output() }</pre>\n                        </td>\n                    </tr>\n                ) : null}\n            </tbody>\n        );\n    }\n}\n","import app from 'flarum/app';\nimport Component from 'flarum/Component';\nimport TaskRepository from './../utils/TaskRepository';\nimport BazaarPageHeader from './BazaarPageHeader';\nimport TaskListItem from './TaskListItem';\nimport BazaarLoader from './BazaarLoader';\n\nexport default class TasksPage extends Component {\n    init() {\n        // Used in the header\n        app.current = this;\n\n        this.loading = m.prop(false);\n        this.repository = new TaskRepository(this.loading);\n        this.repository.loadNextPage();\n        this.loader = BazaarLoader.component({loading: this.loading});\n        this.connected = app.data.settings['flagrow.bazaar.connected'] && app.data.settings['flagrow.bazaar.connected'] !== '0';\n    }\n\n    view() {\n        return (\n            <div className=\"ExtensionsPage Bazaar TaskPage\">\n                {BazaarPageHeader.component({connected: this.connected})}\n\n                <div className=\"ExtensionsPage-list\">\n                    <div className=\"container\">\n                        { this.taskGroups().map(\n                            group => group.tasks.length ? (\n                                <div>\n                                    <h2>{ group.title }</h2>\n                                    <table className=\"TaskPage-table\">\n                                        <thead>\n                                        <tr>\n                                            <th className=\"time-column\">{ app.translator.trans('flagrow-bazaar.admin.page.task.header.time') }</th>\n                                            <th className=\"status-column\">{ app.translator.trans('flagrow-bazaar.admin.page.task.header.status') }</th>\n                                            <th>{ app.translator.trans('flagrow-bazaar.admin.page.task.header.command') }</th>\n                                            <th className=\"details-column\">{ app.translator.trans('flagrow-bazaar.admin.page.task.header.details') }</th>\n                                        </tr>\n                                        </thead>\n                                        { group.tasks.map(\n                                            task => m(TaskListItem, {task: task})\n                                        ) }\n                                    </table>\n                                </div>\n                            ) : null\n                        ) }\n                    </div>\n                </div>\n                { this.loader }\n            </div>\n        );\n    }\n\n    /**\n     * Split tasks into three groups: today, this month and older\n     */\n    taskGroups() {\n        let taskGroups = [\n            {\n                title: app.translator.trans('flagrow-bazaar.admin.page.task.group.today'),\n                tasks: []\n            },\n            {\n                title: app.translator.trans('flagrow-bazaar.admin.page.task.group.lastmonth'),\n                tasks: []\n            },\n            {\n                title: app.translator.trans('flagrow-bazaar.admin.page.task.group.older'),\n                tasks: []\n            }\n        ];\n        let currentGroup = 0;\n\n        // Milliseconds from 1 January 1970 00:00:00 UTC\n        const today = (new Date()).setHours(0,0,0,0);\n\n        this.repository.tasks().forEach(task => {\n            // Milliseconds from 1 January 1970 00:00:00 UTC\n            const taskDate = new Date(task.created_at()).setHours(0,0,0,0);\n\n            switch (currentGroup) {\n                case 0:\n                    if (taskDate === today) {\n                        taskGroups[currentGroup].tasks.push(task);\n                    } else {\n                        currentGroup++;\n                    }\n                    break;\n                case 1:\n                    // Check if the date is within the last 30 days\n                    if ((today - taskDate) / (1000 * 3600 * 24) <= 30) {\n                        taskGroups[currentGroup].tasks.push(task);\n                    } else {\n                        currentGroup++;\n                    }\n                    break;\n                default:\n                    taskGroups[currentGroup].tasks.push(task);\n            }\n        });\n\n        return taskGroups;\n    }\n}\n","import { extend } from 'flarum/extend';\nimport app from 'flarum/app';\nimport Extension from './models/Extension';\nimport Task from './models/Task';\nimport addBazaarPage from './addBazaarPage';\nimport addTasksPage from './addTasksPage';\n\napp.initializers.add('flagrow-bazaar', app => {\n    app.store.models['bazaar-extensions'] = Extension;\n    app.store.models['bazaar-tasks'] = Task;\n\n    addBazaarPage();\n    addTasksPage();\n});\n","import Modal from \"flarum/components/Modal\";\nimport Button from \"flarum/components/Button\";\n\nexport default class BazaarConnectModal extends Modal {\n    className() {\n        return 'FilePermissionsModal';\n    }\n\n    title() {\n        return app.translator.trans('flagrow-bazaar.admin.modal.connect-bazaar.title');\n    }\n\n    content() {\n        let flagrowHost = this.props.flagrowHost;\n\n        return m('div', {className: 'Modal-body'}, [\n                m('p', app.translator.trans('flagrow-bazaar.admin.modal.connect-bazaar.description', {host: flagrowHost})),\n                m('div', {className: \"App-primaryControl\"}, [\n                    Button.component({\n                        type: 'submit',\n                        className: 'Button Button--primary Button--block',\n                        disabled: false,\n                        icon: 'check',\n                        children: app.translator.trans('flagrow-bazaar.admin.page.button.connect')\n                    })\n                ])\n            ]\n        );\n    }\n\n    connect() {\n        var popup = window.open();\n\n        app.request({\n            method: 'GET',\n            url: app.forum.attribute('apiUrl') + '/bazaar/connect'\n        }).then(response => {\n            if (response && response.redirect) {\n                popup.location = response.redirect;\n            } else {\n                popup.close()\n            }\n        });\n    }\n\n    /**\n     * Handle the modal form's submit event.\n     *\n     * @param {Event} e\n     */\n    onsubmit() {\n        this.connect();\n    }\n}\n","import app from 'flarum/app';\nimport SettingsModal from 'flarum/components/SettingsModal';\nimport Switch from 'flarum/components/Switch';\n\nexport default class BazaarSettingsModal extends SettingsModal {\n\n  title() {\n    return app.translator.trans('flagrow-bazaar.admin.modal.settings.title');\n  }\n\n  form() {\n    return [\n      m('div', { className: 'Form-group' }, [\n        m('label', { for: 'use-cron' }, app.translator.trans('flagrow-bazaar.admin.modal.settings.field.use_cron_for_tasks.label')),\n        Switch.component({\n          state: this.setting('flagrow.bazaar.use_cron_for_tasks')(),\n          onchange: this.setting('flagrow.bazaar.use_cron_for_tasks'),\n          children: app.translator.trans('flagrow-bazaar.admin.modal.settings.field.use_cron_for_tasks.toggle')\n        }),\n        m('span', app.translator.trans('flagrow-bazaar.admin.modal.settings.field.use_cron_for_tasks.description', {\n          a: <a href=\"https://github.com/flagrow/bazaar/wiki/Cron-task-processing\" target=\"_blank\"/>\n        }))\n      ]),\n      m('div', { className: 'Form-group' }, [\n        m('label', { for: 'bazaar-api-token' }, app.translator.trans('flagrow-bazaar.admin.modal.settings.field.token.label')),\n        m('input', {\n          id: 'bazaar-api-token',\n          className: 'FormControl',\n          bidi: this.setting('flagrow.bazaar.api_token')\n        }),\n        m('span', app.translator.trans('flagrow-bazaar.admin.modal.settings.field.token.description'))\n      ])\n    ];\n  }\n}\n","import Switch from 'flarum/components/Switch';\nimport SettingsModal from 'flarum/components/SettingsModal';\nimport saveSettings from 'flarum/utils/saveSettings';\nimport Button from 'flarum/components/Button';\n\nexport default class DashboardModal extends SettingsModal {\n  title() {\n    return app.translator.trans('flagrow-bazaar.admin.modal.dashboard.title');\n  }\n\n  form() {\n    const flagrowHost = this.props.flagrowHost;\n    const syncing = this.setting('flagrow.bazaar.sync', false);\n\n    return m('div', { className: 'Modal-body' }, [\n        m('p', app.translator.trans('flagrow-bazaar.admin.modal.dashboard.sync.description', { host: flagrowHost })),\n        Switch.component({\n          state: (syncing() === true || syncing() == 1),\n          onchange: this.updateSetting.bind(this, syncing, 'flagrow.bazaar.sync'),\n          children: app.translator.trans('flagrow-bazaar.admin.modal.dashboard.sync.switch', { host: flagrowHost })\n        }),\n      ]\n    );\n  }\n\n  submitButton() {\n    const flagrowHost = this.props.flagrowHost;\n    return m('div', {className: 'ButtonGroup'}, [\n      Button.component({\n        className: 'Button Connected',\n        icon: 'dashboard',\n        children: app.translator.trans('flagrow-bazaar.admin.modal.dashboard.visit-remote-dashboard'),\n        onclick: () => window.open(flagrowHost + '/home')\n      })\n    ]);\n  }\n\n  /**\n   * Updates setting in database.\n   * @param prop\n   * @param setting\n   * @param value\n   */\n  updateSetting(prop, setting, value) {\n    saveSettings({\n      [setting]: value\n    });\n\n    prop(value);\n  }\n}\n","import Modal from \"flarum/components/Modal\";\n\nexport default class FilePermissionsModal extends Modal {\n    className() {\n        return 'FilePermissionsModal';\n    }\n\n    title() {\n        return app.translator.trans('flagrow-bazaar.admin.modal.requirements.file-permissions.title');\n    }\n\n    content() {\n        var permissions = this.props.file_permissions;\n        var paths = [];\n\n        permissions.forEach(path => {\n            paths.push(m('li', m('span', {className: 'code'}, path)))\n        })\n\n        return m('div', {className: 'Modal-body'}, [\n                m('p', app.translator.trans(\n                    'flagrow-bazaar.admin.modal.requirements.file-permissions.description',\n                    {a: <a href=\"https://github.com/flagrow/bazaar/wiki/File-permissions\" target=\"_blank\"/>}\n                )),\n                m('ul', paths)\n            ]\n        );\n    }\n}\n","import Modal from \"flarum/components/Modal\";\n\nexport default class MemoryLimitModal extends Modal {\n    className() {\n        return 'MemoryLimitModal';\n    }\n\n    title() {\n        return app.translator.trans('flagrow-bazaar.admin.modal.requirements.php-memory_limit.title');\n    }\n\n    content() {\n        let memory_requested = this.props.memory_requested;\n        let memory_limit = this.props.memory_limit;\n\n        return m(\n            'div',\n            {className: 'Modal-body'},\n            app.translator.trans(\n                'flagrow-bazaar.admin.modal.requirements.php-memory_limit.description',\n                {\n                    required: memory_requested,\n                    limit: memory_limit,\n                    a: <a href=\"https://github.com/flagrow/bazaar/wiki/PHP-memory-limit\" target=\"_blank\"/>\n                }\n            )\n        );\n    }\n}\n","import Model from 'flarum/Model';\nimport mixin from 'flarum/utils/mixin';\nimport computed from 'flarum/utils/computed';\n\nexport default class Extension extends mixin(Model, {\n    package: Model.attribute('package'),\n    title: Model.attribute('title'),\n    description: Model.attribute('description'),\n    license: Model.attribute('license'),\n    icon: Model.attribute('icon'),\n    locale: Model.attribute('locale'),\n\n    discuss_link: Model.attribute('discuss_link'),\n    landing_link: Model.attribute('landing_link'),\n\n    downloads: Model.attribute('downloads'),\n\n    installed: Model.attribute('installed'),\n    enabled: Model.attribute('enabled'),\n    pending: Model.attribute('pending'),\n    installed_version: Model.attribute('installed_version'),\n    highest_version: Model.attribute('highest_version'),\n    outdated: Model.attribute('outdated'),\n\n    flarum_id: Model.attribute('flarum_id'),\n\n    premium: Model.attribute('premium'),\n    subscribed: Model.attribute('subscribed'),\n\n    // Install/uninstall\n    // Extension is available if it's either non-premium or premium & subscribed\n    can_install: computed('installed', 'premium', 'subscribed', 'flarumCompatibilityCurrent', (installed, premium, subscribed, flarumCompatibilityCurrent) => !installed && flarumCompatibilityCurrent && (!premium || subscribed)),\n    can_uninstall: computed('installed', 'enabled', (installed, enabled) => installed && !enabled),\n\n    // Enable/disable\n    can_enable: computed('installed', 'enabled', (installed, enabled) => installed && !enabled),\n    can_disable: computed('installed', 'enabled', (installed, enabled) => installed && enabled),\n\n    canCheckout: Model.attribute('canCheckout'),\n    canUnsubscribe: Model.attribute('canUnsubscribe'),\n    canSafelyUnsubscribe: computed('canUnsubscribe', 'installed', (canUnsubscribe, installed) => canUnsubscribe && !installed),\n\n    favorites: Model.attribute('favorites'),\n    favorited: Model.attribute('favorited'),\n\n    flarumCompatibilityLatest: Model.attribute('flarumCompatibilityLatest'),\n    flarumCompatibilityNext: Model.attribute('flarumCompatibilityNext'),\n    flarumCompatibilityCurrent: Model.attribute('flarumCompatibilityCurrent'),\n}) {}\n","import Model from 'flarum/Model';\nimport mixin from 'flarum/utils/mixin';\n\nexport default class Task extends mixin(Model, {\n    status: Model.attribute('status'),\n    command: Model.attribute('command'),\n    package: Model.attribute('package'),\n    output: Model.attribute('output'),\n    created_at: Model.attribute('created_at'),\n    started_at: Model.attribute('started_at'),\n    finished_at: Model.attribute('finished_at')\n}) {}\n","import app from \"flarum/app\";\nimport popupPromise from './popupPromise';\n\nexport default class ExtensionRepository {\n    constructor(loading) {\n        this.extensions = m.prop([]);\n        this.loading = loading;\n    }\n\n    /**\n     * Handles a request error\n     */\n    requestError() {\n        // If an error occured, we can clear the loading overlay\n        // The error means it's not processing anymore\n        this.loading('error');\n\n        // Depending on how fast the \"Oops! Something went wrong\" popup appears,\n        // the loading change is not taken into account. Use redraw to force remove the overlay\n        m.redraw();\n    }\n\n    /**\n     * Install an extension.\n     * @param extension\n     */\n    installExtension(extension) {\n        this.loading(true);\n\n        app.request({\n            method: 'POST',\n            url: app.forum.attribute('apiUrl') + '/bazaar-extensions',\n            timeout: 0,\n            data: {\n                id: extension.id()\n            }\n        }).then(response => {\n            return this.updateExtensionInRepository(response)\n        }).catch(() => this.requestError());\n    }\n\n    /**\n     * Handles an installation failure.\n     * @param extension\n     */\n    installFailure(extension) {\n        this.resetNavigation();\n        this.loadNextPage();\n    }\n\n    /**\n     * Uninstall an extension.\n     * @param extension\n     */\n    uninstallExtension(extension) {\n        this.loading(true);\n\n        app.request({\n            method: 'DELETE',\n            timeout: 0,\n            url: app.forum.attribute('apiUrl') + '/bazaar-extensions/' + extension.id()\n        }).then(response => {\n            return this.updateExtensionInRepository(response)\n        }).catch(() => this.requestError());\n    }\n\n    /**\n     * Handles an uninstall failure.\n     * @param extension\n     */\n    uninstallFailure(extension) {\n        this.resetNavigation();\n        this.loadNextPage();\n    }\n\n    /**\n     * Processing (de-) favoriting extensions.\n     * @param extension\n     */\n    favoriteExtension(extension) {\n        this.loading(true);\n\n        app.request({\n            method: 'post',\n            url: app.forum.attribute('apiUrl') + '/bazaar-extensions/' + extension.id() + '/favorite',\n            data: {\n                favorite: extension.favorited() != true\n            }\n        }).then(response => {\n            return this.updateExtensionInRepository(response)\n        }).catch(() => this.requestError());\n    }\n\n    premiumExtensionSubscribe(extension, buy = true) {\n        //this.loading(true);\n\n        const popup = popupPromise({\n            url: app.forum.attribute('apiUrl') + '/bazaar/redirect/' + (buy ? '' : 'un') + 'subscribe/' + extension.id(),\n            waitForUrl: app.forum.attribute('apiUrl') + '/bazaar/callback/subscription',\n        });\n\n        popup.then(() => {\n            window.location.reload();\n        }).catch(() => {\n            alert(app.translator.trans('flagrow-bazaar.admin.page.extension.subscribe_check_failed'));\n        });\n    }\n\n    premiumExtensionUnsubscribe(extension) {\n        this.premiumExtensionSubscribe(extension, false);\n    }\n\n    /**\n     * Updates an extension.\n     * @param extension\n     */\n    updateExtension(extension) {\n        this.loading(true);\n\n        app.request({\n            url: app.forum.attribute('apiUrl') + '/bazaar-extensions/' + extension.id(),\n            timeout: 0,\n            method: 'PATCH'\n        }).then(response => {\n            return this.updateExtensionInRepository(response)\n        }).catch(() => this.requestError());\n    }\n\n    /**\n     * Toggles an extension (enable or disable).\n     * @param extension\n     */\n    toggleExtension(extension) {\n        this.loading(true);\n\n        const enabled = extension.enabled();\n\n        app.request({\n            url: app.forum.attribute('apiUrl') + '/bazaar-extensions/' + extension.id() + '/toggle',\n            method: 'PATCH',\n            data: {enabled: !enabled}\n        }).then(response => {\n            return this.updateExtensionInRepository(response)\n        }).catch(() => this.requestError());\n    }\n\n    /**\n     * Disable an extension.\n     * @param extension\n     */\n    disableExtension(extension) {\n        return this.toggleExtension(extension);\n    }\n\n    /**\n     * Enable an extension.\n     * @param extension\n     */\n    enableExtension(extension) {\n        return this.toggleExtension(extension);\n    }\n\n    /**\n     * Loads the index of this extension in the extensions array.\n     * @param extension\n     * @returns {number}\n     */\n    getExtensionIndex(extension) {\n        return this.extensions().findIndex(ext => ext.id() == extension.id());\n    }\n\n    /**\n     * Updates an extension and takes care of updating its state in the extension page too.\n     * @param extension\n     * @param property\n     * @param value\n     */\n    updateExtensionInRepository(response) {\n        this.loading(false);\n\n        let extension = app.store.pushObject(response.data);\n        this.extensions()[this.getExtensionIndex(extension)] = extension;\n\n        m.redraw();\n\n        return extension;\n    }\n}\n","import app from 'flarum/app';\n\nexport default class ExtensionRepository {\n    constructor(loading) {\n        this.tasks = m.prop([]);\n        this.nextPageUrl = null;\n        this.loading = loading;\n        this.resetNavigation();\n    }\n\n    loadNextPage() {\n        if (this.loading() || !this.nextPageUrl) {\n            return;\n        }\n\n        this.loading(true);\n\n        app.request({\n            method: 'GET',\n            url: this.nextPageUrl\n        }).then(result => {\n            const newTasks = result.data.map(data => app.store.createRecord('bazaar-tasks', data));\n            this.tasks(newTasks);\n            this.nextPageUrl = null;\n            this.loading(false);\n\n            m.redraw();\n        });\n    }\n\n    resetNavigation() {\n        this.loading(false);\n        this.nextPageUrl = app.forum.attribute('apiUrl') + '/bazaar/tasks';\n        this.tasks([]);\n    }\n\n}\n","/**\n * Based on _.debounce from underscore.js\n * Copyright (c) 2009-2017 Jeremy Ashkenas, DocumentCloud and Investigative\n * @see https://davidwalsh.name/javascript-debounce-function\n *\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing.\n */\nexport default function (func, wait, immediate) {\n    let timeout;\n    return function () {\n        let context = this, args = arguments;\n        let later = function () {\n            timeout = null;\n            if (!immediate) func.apply(context, args);\n        };\n        let callNow = immediate && !timeout;\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n        if (callNow) func.apply(context, args);\n    };\n};\n","export default function(settings = {})\n{\n    const url = settings.url || '/';\n    const waitForUrl = settings.waitForUrl || null;\n    const width = settings.width || 600;\n    const height = settings.height || 400;\n    const $window = $(window);\n\n    // The new Promise polyfill of Mithril v1 is a lot better\n    const deferred = m.deferred();\n\n    const popup = window.open(url, 'bazaarPopup',\n        `width=${width},` +\n        `height=${height},` +\n        `top=${$window.height() / 2 - height / 2},` +\n        `left=${$window.width() / 2 - width / 2},` +\n        'status=no,scrollbars=no,resizable=no');\n\n    const interval = window.setInterval(() => {\n        try {\n            if (popup.closed) {\n                window.clearInterval(interval);\n                deferred.reject();\n            } else if (popup.document.URL === waitForUrl) {\n                window.clearInterval(interval);\n                popup.close();\n                deferred.resolve();\n            }\n        } catch (e) {\n            // Ignore errors, these will be cross-origin exceptions\n        }\n    }, 500);\n\n    return deferred.promise;\n}\n","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['components/AdminLinkButton'];","module.exports = flarum.core.compat['components/AdminNav'];","module.exports = flarum.core.compat['components/Badge'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/Dropdown'];","module.exports = flarum.core.compat['components/LinkButton'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['components/Placeholder'];","module.exports = flarum.core.compat['components/SettingsModal'];","module.exports = flarum.core.compat['components/Switch'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/fullTime'];","module.exports = flarum.core.compat['helpers/humanTime'];","module.exports = flarum.core.compat['helpers/icon'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['utils/computed'];","module.exports = flarum.core.compat['utils/extract'];","module.exports = flarum.core.compat['utils/extractText'];","module.exports = flarum.core.compat['utils/mixin'];","module.exports = flarum.core.compat['utils/saveSettings'];"],"sourceRoot":""}